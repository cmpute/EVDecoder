ExView.Plugins({info:{name:"\u8f7b\u6f2b\u753b",version:"2.2",db:"qingman",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC6ElEQVQ4jWWTTWwUZRzGf+87Mzv7zU4Ju42VVkxKaEBNq2kEKyFBPMlBEuPVE+HEzZooF8LFA9de8KAxGhM5GA/WKMYEbQOlEHrQ6ra2TT9Uysrsbmdn2d2Z9309bLsa/V//z0ee5HnE8Mp3hv+eAW00yhhsIRBCgvgfCgBbKasKeGAQBuphiBfDeLpA0XH5s9PibrNG4Ejy6TRGwL/VbK1k11RrqAVMPXWMc/1D2FL2QB2l+PSPNS5tLuJ4+xDiHwEx+POMjzaeWw+4MfoyQ+ls7znvV6hHHV4pDQCw1KhzZmEWvDzsikilJH4t5JOR8R652unwxu0fePHOj7y2MMf13zcAOJzdxweHx6jWH6OURCmJVLHkZCLHeN9+3p67zZXFn/h8a5NfagH3T5wmnynwZa3GO/fuAvBqsZ9juOhYorWFDJoR50pP0oxjFpTh6qMq135b4auJU3y7XSGI4OajGkvNFu1YAfB6cYBGW6OUhTQdw8FkCgys7zSZyHskMwXKjZD3yqtceOIgl4eeJqslS0EDgEPpDKql0VoijbYJY03asfnw+VFm1h5QNhaXy2tcGBxianmL80vruPkCD1ttAMJYY4yNVhZSOGnm/R0AXjrQx9SzRzhquwjpcjyf49aJMfaLBPfDmDPTs8w/9JnZrmI5qW4ESyb4aMOntZtvJJclDCPmGzF522by1iL1nTbFdszs2VMMF3Jc3w4QON0ISln4TobJeyu7pdEMIxDbdQZSSd4cLDF38hm+Pj3G8aLHxTvLtJM5lLJQykIkv1/2AS8Kmkz2Z7jywiEsKbm5UWG0VCDvOr1ivTuzyPubAW6pr1ckkbix6ne3AKrVYkR1uHikxEQxRz5hU2l2yNiSYS8DwGerf/FWuQqO3RWwvlmvAoW9FYJBP25joqhr22wxNT5A2hh+rdSYrsRsZTPUjURYEiGmNz8Gzu7Ru0vbW7gAo0lFEc1I47k2z6UkB6RGWRZfhML6Gw4pRjcl4aHrAAAAAElFTkSuQmCC",
apihost:"http://m.comicq.cn/",pagetitle:["<br>","\u6536\u85cf","\u6700\u65b0\u66f4\u65b0","\u7c7b\u578b","\u4e0b\u8f7d"],lazyload:!0,vphotomode:!0,theme:"cyan",download:!0,setting:!0,cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader();ExView.workers.type.loader()}})},flags:{indexflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"index.php?m=Index&a=morenew&p="+(parseInt(a.page||1)-1),method:"GET",
timeout:120,successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),title:a.title,name:"\u6700\u65b0\u66f4\u65b0",img:a.img}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){array_count(b)?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',
1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){return{pagecount:0}}}}},typeflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"index.php?m=Index&a=kinds",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){addtypelist({title:"\u6700\u65b0\u66f4\u65b0",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u6700\u65b0\u66f4\u65b0"});return{reg:/<div\s*style=".*?">\s*\r*\n*\r*\s*<img\s*id="(\d+)"\s*class="([a-z]+)"\s*style=".*?"\s*src="(.*?)"\/>\s*\r*\n*\r*\s*<div\s*style=".*?">(.*?)<\/div>\s*\r*\n*\r*\s*<\/div>/g,
str:a.result,find:"$1{{separator}}$2{{separator}}$3{{separator}}$4",successfn:function(b){b=b.split("{{separator}}");if(array_count(b)){var c=b[0],d=b[1],e=b[2]?pluginfo(a.plugin).apihost+b[2].substring(1):"";b=b[3];var f="";"a"==d?(d={name:"jindu",title:"\u8fdb\u5ea6"},f="a"):(d={name:"ticai",title:"\u9898\u6750"},f="c");addtypelist({tid:c,title:b,img:e,listflag:f,listbg:!0,group:d,content:b})}else addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',
2)}}}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"index.php?m=Index&a="+("c"==a.flag?"thememore":"a"==a.flag?"isovermore":"morenew")+("new"!=a.flag?("c"==a.flag?"&id=":"&status=")+a.keyword:"")+"&p="+(parseInt(a.page||1)-1),method:"GET",timeout:120,successfn:function(b,c){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:c})),a.successfn&&a.successfn({result:b,header:c})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01",
"ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),title:a.title,name:"\u3010"+a.title+"\u3011",img:a.img}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){array_count(b)?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){return{pagecount:0,keyword:a.keyword}}}}},
searchflag:{loader:function(a){return 1<parseInt(a.page)?(a.multsearch&&a.multsearch(),!1):{url:pluginfo(a.plugin).apihost+"index.php?m=Index&a=search&searchcontent="+encodeURIComponent(a.keyword),method:"GET",timeout:120,successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),mySession.isloading=
0,ExView.fw.alert("\u3010"+a.keyword+"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return-1!=a.result.indexOf('<div style="float:left;width')?(a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1),!1):{reg:/Index&a=read&comic_id=(\d+)&order_idx=1">((?:.|[\r\n])*?)<\/a>/g,
str:a.result,find:"$1{{separator}}$2",successfn:function(b,c,d){console.log(b);if(b){b=b.split("{{separator}}");c=b[0];d=getstr(/>((?!<).*?)<\/span>/,b[1]);var e=getstr(/<img(?!<).*?src="((?!\").*?)"/,b[1]),f=getstr(/\u4f5c\u8005\uff1a((?!<).*?)\s*<\/div>/,b[1]);b="\u66f4\u65b0\u81f3"+getstr(/\u66f4\u65b0\u5230\u7b2c(\d+)\u8bdd/,b[1])+"\u8bdd";if(a.multsearch)return a.multsearch(obj_contact(a,{pid:c,img:e,title:d,content:b})),!1;addcardlist({pid:c,title:d,name:"\u3010"+f+"\u3011"+d,img:e,content:b,
comment:0})}else a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){return{pagecount:-1,keyword:a.keyword}}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"index.php?m=Index&a=read&comic_id="+a.pid+"&order_idx=1",method:"GET",timeout:120,successfn:function(b,c){b?ExView.modules.rulefind({reg:/\r*\n*\$max_page_num\s*=\s*(\d+)\s*;\r*\n*/g,
str:b,find:"$1",successfn:function(c,e){ExView.modules.curl({url:pluginfo(a.plugin).apihost+"index.php/Index/menunextprev.html",method:"POST",data:"comic_id="+a.pid+"&page="+c+"&order_idx=1",header:{"Content-Type":"application/x-www-form-urlencoded"},successfn:function(c,d){a.successfn&&a.successfn({catalog:c,header:d,result:b})},showinfo:""})}}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u5185\u5bb9\u9875...",
title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{successfn:function(){var b=JSON.parse(a.catalog);if(array_count(b)){b=parseInt(b[b.length-1].order_idx);if(a.checkupdate)return{pid:a.pid,cid:b,title:"\u7b2c"+b+"\u8bdd"};for(var c=[],d=b-1;-1<d;d--)c[d]=additemlist({id:d,newest:a.newest&&0==d,pid:a.pid,cid:d+1,title:"\u7b2c"+(d+1)+"\u8bdd",count:b,reverse:0});return c}a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01",
"ExView"))},afterfn:function(){a.checkupdate||ExView.workers.content.infofinder(a)}}},infoloader:function(a){return!1},infofinder:function(a){console.log(a);return{reg:/<img\s*src="((?!\").*?)"(?!\<).*?\/>\s*\r*\n*\s*<\/div>\s*\r*\n*\s*<div\s*id="share_comicname"(?!<).*?>((?!<).*?)<\/div>/g,str:a.result,find:"$1{{separator}}$2",successfn:function(b,c,d,e){b=(b||"").split("{{separator}}");c=b[1];setlistpic({name:c,img:b[0],added:a.data,description:"",comment:0,preview:0,tags:gettag(c)});return!0}}}},
parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"index.php?m=Index&a=read&comic_id="+a.pid+"&order_idx="+a.cid,method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u56fe\u7247\u4fe1\u606f...",title:"\u56fe\u7247",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){console.log(a);return{reg:/<img\s*src="(.*?)"\s*class="share_productimg"\s*\/>/g,str:a.result,find:"$1",successfn:function(b,
c,d,e){array_count(e)?(console.log(e),a.download?chapterpredownload({source:e,download:a.download,plugin:a.plugin}):chapterviewer({source:e,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})):a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u56fe\u7247\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:!1,
finder:!1},previewflag:{loader:!1,finder:!1,more:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"index.php?m=Index&a=morenew&p="+(parseInt(a.page||1)-1),method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){array_count(b)&&plugfns(a.plugin).pagedeal(b,a)}}}},hotflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"index.php?m=Index&a=morenew&p="+
(parseInt(a.page||1)-1),method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){array_count(b)&&plugfns(a.plugin).pagedeal(b,a)}}}}},fns:{pagedeal:function(a,b){b=b||{};var c=a.id,d=a.comic_name,e=a.comic_pic_240_320,f=a.painter_user_nickname;if(b.multupdate)return b.multupdate(obj_contact(b,{pid:c,img:e,title:d,content:f})),!1;addcardlist({pid:c,title:d,img:e,stitle:f||"",comment:0})}}});
