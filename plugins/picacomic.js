ExView.Plugins({info:{name:"哔咔漫画",version:"2.2",db:"picacomic",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALaSURBVDhPhZBrSJNhGIb7l0g4LOhP1Ob3bSkmYp4iUTTwkNpSa80000orraXidLSpaUYedjLcLC1GWmDWlknRWvOwmVZgzKLjTGOJaVhmgTlbKXdOP5Nh1AUvPLw8183Ns2IRcgPpyyIImTtJ1pIMRhT1/X8IglhL0IlcaZV4ZnJyEjabDdeamsD2CXvRnCs7X5rKS9pEkuup9eUwGQwZy41AImcP5BIperq7YbVaIRdLYVLcwmWhFJKcIjQKJBZRcmY0pS1B0t1Egb5+2EiQIOmM+efBZCEsJATB/lugvauFvZnqwkVwI3awKW0JT0/PVcWiwh/2JaPBAHFlJXbHJ8CdZP4JtM/bIyLnZrc6SnMkxCvAYJcX6TebwU85Cl5KBqRiCbi7OfOt5o7bQimOlAQdyEv0Dv+8f+ceCPZloTTkIIbKtXh9SYfK/GLwM/MQ4xf67Z/HPBucUc4PykC0dwwEEak4f7wU/KRMxAVyUccVoYMtRl54Si0/m8fj89J5ieyoOEpdQBmWXW7OuQZvNw9wt4VidvANLhRXwtiiQXuXAQ92VaP3phrTY69g/fgMzfVVekpdYP/maH9F8kl1dUE+8jlspKcJEZ92Bk8fm2B5+RymdiPu37mHqZG++QB1fYVjgB06ne6Uk542xi9RolbTicGJ75A3avH2oQ7T799hdtiCn6OvMdXfges1ZcsD7KjKs3Xvx8dhGpnAp+lfuKwx4O3zudqjw3h2RYPhR62wvjNCrSz5e8ANZaGur0eLD1M2PB35ggHLBwyY+vCyWYw2WgG6nATo9CmCemueWeia4EVpS1yvEeq+PmnEKclVKBTNmBkbhVSugrHgLOpdDqBgzQ6UuXIgpyXjrlOOnNKWEGXtrVArhW2nD+0dam1Q6RtkVfojh3P1sUSsvtWZ13vb+cRMDS0F52j7ULg6PpLSlsNisdZRowMBHh5rlC6pSRrnY0omk7nyN67dmMp1K4taAAAAAElFTkSuQmCC",
apihost:"https://picaapi.picacomic.com/",pagetitle:["<br>","收藏","最新更新","类型","下载"],authorization:"",lazyload:!0,theme:"pink",download:!0,setting:!0,settingextra:getui([{name:"user",title:"用户",type:"input"},{name:"password",title:"密码",type:"input"},{name:"authorization",title:"验证信息",type:"input"},{value:'<li><div class="col-50"><a href="#" class="button button-raised open-login-screen">获取验证信息</a></div></li>',
type:"html"}]),commentbar:!0,commentbuttons:"",commentplaceholder:"Message",commentsendbutton:"发送",cdn:""},set:function(a){},unset:function(a){setloginscreen(!1)},init:function(a){a=a||{};plugfns().initloginscreen({plugin:mySession.nowplugin});ExView.workers.fav.listloader({callback:function(){pluginfo(a.plugin).authorization||($$("#card-page").html('<a href="javascript:void(0)" onclick="ExView.fw.loginScreen()"><div align="center" class="list-block"><img src="https://www.picacomic.com/images/apple-icon-180x180.png" onerror="this.src=\'img/nopic.png\';"/><br>悲伤的哔咔哔咔</div></a>'),
$$("#type-page").html('<a href="javascript:void(0)" onclick="ExView.fw.loginScreen()"><div align="center" class="list-block"><img src="https://www.picacomic.com/images/apple-icon-180x180.png" onerror="this.src=\'img/nopic.png\';"/><br>悲伤的哔咔哔咔</div></a>'),slidetopage(1),ExView.fw.alert("请设置登陆账号,否则会无法使用！",sessionStorage.modaltitleextra+"哔咔哔咔",function(){ExView.fw.loginScreen()}))}})},
flags:{indexflag:{loader:function(a){if(pluginfo(a.plugin).authorization){var b={url:pluginfo(a.plugin).apihost+"comics?s=ua&page="+parseInt(a.page||1),ua:"okhttp/3.2.0",timeout:120,nativerequest:!0,successfn:function(b,d){ExView.fw.hidePreloader();a.callback&&a.callback({img:pluginfo(a.plugin).icon,multpage:!0,result:b,header:d})}};return obj_contact({header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics?s=ua&page="+parseInt(a.page||1)),errorfn:function(c,d,f){console.log([c,d,f]);
var g=function(){$$("#card-page").html('<div align="center" class="list-block"><img src="img/logo.png" onerror="this.src=\'img/nopic.png\';"/><br><a href="javascript:void(0)" onclick="ExView.workers.index.loader();">重新加载</a>&nbsp;&nbsp;<a href="javascript:void(0)" onclick="ExView.fw.loginScreen()">重新登陆</a></div>');ExView.fw.alert("网络错误！重新登陆？","ExView")};if(401==d&&(c=pluginfo(a.plugin),c.user&&c.password)){plugfns(a.plugin).login(c.user,
c.password,a,{callback:function(c,d){ExView.modules.curl(obj_contact({header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics?s=ua&page="+parseInt(a.page||1)),errorfn:function(a,b,c){ExView.fw.hidePreloader();g()},showinfo:{text:"正在加载..."+(1<a.page?"<br>第"+a.page+"页":""),name:"首页",title:mySession.nowlistname,img:mySession.nowlistimg}},b))},errorfn:function(a,b,c){ExView.fw.hidePreloader();g()}});return}g()}},b)}},finder:function(a){return{json:!0,
str:a.result,successfn:function(b){b=b.data.comics.docs;array_count(b)?plugfns(a.plugin).pagedeal(b,a):a.callback()}}},countloader:!1,countfinder:function(a){return{json:!0,str:a.result,successfn:function(b){a.callback&&a.callback({pagecount:array_count(b)?b.data.comics.pages:"-1"})}}}},typeflag:{loader:function(a){a=a||{};if(pluginfo(a.plugin).authorization)return{url:pluginfo(a.plugin).apihost+"categories",ua:"okhttp/3.2.0",timeout:120,header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+
"categories"),nativerequest:!0,successfn:function(b,c){a.callback({result:b,header:c})},errorfn:function(){$$("#type-page").html('<div align="center" class="list-block"><img src="img/logo.png" onerror="this.src=\'img/nopic.png\';"/><br><a href="javascript:void(0)" onclick="ExView.workers.type.loader();">重新加载</a>&nbsp;&nbsp;<a href="javascript:void(0)" onclick="ExView.fw.loginScreen()">重新登陆</a></div>');ExView.fw.alert("网络错误！重新登陆？",
"ExView")}}},finder:function(a){a=a||{};a.callback({title:"最新更新",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"导航"},content:"最新更新"});a.callback({tid:"",listflag:"comics/random",title:"随机本子",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"导航"},content:"随机本子"});a.callback({tid:"hot",listflag:"comics/leaderboard?tt=H24&ct=VC",title:"过去24小时最热门",img:pluginfo(a.plugin).icon,
group:{name:"daohang",title:"导航"},content:"过去24小时最热门"});a.callback({tid:"hot",listflag:"comics/leaderboard?tt=D7&ct=VC",title:"过去7天最热门",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"导航"},content:"过去7天最热门"});a.callback({tid:"hot",listflag:"comics/leaderboard?tt=D30&ct=VC",title:"过去30天最热门",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"导航"},
content:"过去30天最热门"});return{json:!0,str:a.result,successfn:function(b){b=((b||{}).data||{}).categories;array_count(b)&&b.forEach(function(b){a.callback({tid:b.title,title:b.title,img:b.thumb.fileServer+"/static/"+b.thumb.path,group:{name:"fenlei",title:"分类"},content:b.title})})}}}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+(a.flag?a.flag:"comics?page="+parseInt(a.page||1)+"&c="+a.tid+"&s=ua"),method:"GET",ua:"okhttp/3.2.0",timeout:120,
header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+(a.flag?a.flag:"comics?page="+parseInt(a.page||1)+"&c="+encodeURIComponent(a.tid)+"&s=ua")),nativerequest:!0,successfn:function(b,c){a.callback&&a.callback({multpage:!0,result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=a.flag?b.data.comics:b.data.comics.docs;array_count(b)?plugfns(a.plugin).pagedeal(b,a):a.callback()}}},countloader:!1,countfinder:function(a){return{json:!0,str:a.result,successfn:function(b){a.callback&&
a.callback({pagecount:array_count(b)?b.data.comics.pages:"-1"})}}}},searchflag:{loader:function(a){var b={url:pluginfo(a.plugin).apihost+"comics/search?page="+parseInt(a.page||1)+"&q="+a.keyword,method:"GET",ua:"okhttp/3.2.0",timeout:120,nativerequest:!0,successfn:function(b,d){a.callback&&a.callback({multpage:!0,result:b,header:d})}};return obj_contact({header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics/search?page="+parseInt(a.page||1)+"&q="+encodeURIComponent(a.keyword)),errorfn:function(b,
d,f){if(401==d&&(b=pluginfo(a.plugin),b.user&&b.password)){plugfns(a.plugin).login(b.user,b.password,a,{callback:function(b,c){a.multsearch?a.multsearch({error:"已登录"}):ExView.fw.alert("已经成功登陆哔咔哔咔！",sessionStorage.modaltitleextra+"登陆成功")},errorfn:function(b,c,d){a.multsearch?a.multsearch({error:"network"}):(ExView.fw.hidePreloader(),ExView.fw.alert(b,sessionStorage.modaltitleextra+"登陆失败"))},
showinfo:a.multsearch?"":{text:"正在登陆哔咔哔咔...",title:"登陆",img:pluginfo(a.plugin).icon}});return}a.multsearch?a.multsearch({error:"network"}):(ExView.fw.hidePreloader(),mySession.customerror())}},b)},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,d){b=b.data.comics.docs;array_count(b)?plugfns(a.plugin).pagedeal(b,a):a.multsearch?a.multsearch():a.callback()}}},countloader:!1,countfinder:function(a){return{json:!0,str:a.result,successfn:function(b){a.callback&&
a.callback({pagecount:array_count(b)?b.data.comics.pages:"-1"})}}}},contentflag:{loader:function(a){var b={url:pluginfo(a.plugin).apihost+"comics/"+a.pid+"/eps?page=1",method:"GET",ua:"okhttp/3.2.0",timeout:120,nativerequest:!0,successfn:function(b,d){a.callback&&a.callback({result:b,header:d})}};return obj_contact({header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics/"+a.pid+"/eps?page=1"),errorfn:function(c,d,f){if(401==d&&(d=pluginfo(a.plugin),d.user&&d.password)){plugfns(a.plugin).login(d.user,
d.password,a,{callback:function(c,d){ExView.modules.curl(obj_contact({header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics/"+a.pid+"/eps?page=1"),errorfn:function(b,c,d){a.checkupdate?a.checkupdate():(ExView.fw.hidePreloader(),ExView.fw.alert(b,sessionStorage.modaltitleextra+"登陆失败"))},showinfo:a.checkupdate?"":{text:"正在加载内容页...",title:"内容页",name:getlistname(a.pid),img:getlistimg(a.pid)}},b))},errorfn:function(b,
c,d){a.checkupdate?a.checkupdate():(ExView.fw.hidePreloader(),ExView.fw.alert(b,sessionStorage.modaltitleextra+"登陆失败"))}});return}a.checkupdate?a.checkupdate():(ExView.fw.hidePreloader(),ExView.fw.alert(c,sessionStorage.modaltitleextra+"登陆失败"))}},b)},finder:function(a){return{str:a.result,json:!0,successfn:function(b){var c=b.data.eps.total;b=b.data.eps.docs;if(array_count(b)){b=a.pid;if(a.checkupdate)return{pid:b,cid:c,title:"第"+c+"集"};for(var d=
[],f=0;f<c;f++)d[f]=a.callback({id:f,newest:a.newest&&0==f,pid:b,cid:f+1,title:"第"+(f+1)+"集",count:c,reverse:0});console.log(d);return d}a.checkupdate||a.callback()}}},infoloader:function(a){return{url:pluginfo(a.plugin).apihost+"comics/"+a.pid,method:"GET",ua:"okhttp/3.2.0",timeout:120,header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics/"+a.pid),nativerequest:!0,successfn:function(b,c){a.callback&&a.callback({result:b,header:c})},showinfo:""}},infofinder:function(a){return{str:a.result,
json:!0,successfn:function(b,c,d,f){b=b.data.comic;c=b.title;var g=b.description,e=b.author;d=b.categories;f=b.tags;var k=b.thumb.fileServer+"/static/"+b.thumb.path,h=b.pagesCount,l=b.updated_at,v=b.commentsCount;b=(e?"【作者】"+e+"<br>":"")+("【状态】"+(b.finished?"完结":"连载")+"<br>")+(d?"【类型】"+d.join(",")+"<br>":"")+(f?"【标签】"+f.join(",")+"<br>":"")+(l?"【更新】"+l+"<br>":"")+(g?"【简介】"+
g+"<br>":"");myContent.imgcount=h||0;a.callback({name:c,img:k,added:a.data,description:"<p>共"+(h||0)+"张图片</p>"+b,comment:v,preview:0,tags:gettag(c)+gettag(d)+gettag(f)});return!0}}}},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comics/"+a.pid+"/order/"+a.cid+"/pages?page=1",method:"GET",ua:"okhttp/3.2.0",timeout:120,header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics/"+a.pid+"/order/"+a.cid+"/pages?page=1"),nativerequest:!0,successfn:function(b,
c){a.callback&&a.callback({result:b,header:c})}}},finder:function(a){console.log(a);return{json:!0,str:a.result,successfn:function(b,c,d,f){b=(b||{}).data.pages;var g=b.pages,e=[];b.docs.forEach(function(a){a=(a||{}).media||{};a=a.fileServer+"/static/"+a.path;a=getcommonload(a);e.push(a)});var k=function(b){array_count(b)?(console.log(b),a.download?a.callback({source:b,download:a.download,plugin:a.plugin}):a.callback({source:b,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,
zoom:!0,title:a.title})):a.callback()},h=function(b){ExView.modules.curl({url:pluginfo(a.plugin).apihost+"comics/"+a.pid+"/order/"+a.cid+"/pages?page="+b,method:"GET",ua:"okhttp/3.2.0",timeout:120,header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics/"+a.pid+"/order/"+a.cid+"/pages?page="+b),nativerequest:!0,progressname:"progress_"+a.plugin+"_"+a.pid+"_"+a.cid,progressfn:function(b,c){if(b||c)$$(".downloadprogress_"+a.plugin+"_"+a.pid+"_"+a.cid+".downloadnowpage").html("正在解析中..."),
$$(".progress_"+a.plugin+"_"+a.pid+"_"+a.cid).html(" "+b+(c?"/"+c:"")+" Bytes")},successfn:function(c,d){if(c){var f=JSON.parse(c||"{}"),f=(f||{}).data.pages;f.docs.forEach(function(a){a=(a||{}).media||{};a=a.fileServer+"/static/"+a.path;a=getcommonload(a);e.push(a)});console.log(e);if(b<g)return h(b+1),!1;!a.download&&ExView.fw.hidePreloader();k(e)}else a.download?chapterpredownload({error:"解析错误！",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),mySession.isloading=
0,ExView.fw.alert("图片信息获取失败！","ExView"))},errorfn:function(){chapterpredownload({error:"解析错误！",download:a.download,plugin:a.plugin})},showinfo:a.download?"":2==b?{text:"正在加载图片信息...",title:"图片",name:getlistname(a.pid),img:getlistimg(a.pid)}:""})};1<g?h(2):k(e);return!0}}}},commentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comics/"+a.pid+"/comments?page="+(a.page||
1),method:"GET",ua:"okhttp/3.2.0",timeout:120,header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics/"+a.pid+"/comments?page="+(a.page||1)),nativerequest:!0,successfn:function(b,c){b?a.callback({result:b,header:c,commentbrowser:!1}):a.callback()}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,d,f){b=(b||{}).data.comments;if(array_count(b)){c=b.pages;var g=b.docs,e;for(e in g)a.callback({page:a.page||1,pagecount:c,comment:{text:g[e].content,name:(g[e]._user||
{}).name,avatar:function(){try{return(g[e]._user||{}).avatar.fileServer+"/static/"+(g[e]._user||{}).avatar.path}catch(a){return"img/logo.png"}}(),type:"received",label:g[e].created_at,day:"",time:"",reverse:1,extra:""}})}}}},send:function(a){return{url:pluginfo(a.plugin).apihost+"comics/"+a.pid+"/comments",method:"POST",data:a.value?JSON.stringify({content:a.value}):"",ua:"okhttp/3.2.0",timeout:120,header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics/"+a.pid+"/comments"),nativerequest:!0,
successfn:function(b,c){b?a.callback&&a.callback({text:a.value,name:"我",avatar:"",type:"sent",label:"",day:"",time:"",reverse:1,extra:""}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("评论发送失败！","ExView"))},showinfo:{text:"正在发送评论信息...",title:"评论页",name:getlistname(a.pid),img:getlistimg(a.pid)}}}},previewflag:{loader:!1,finder:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){var b=
{url:pluginfo(a.plugin).apihost+"comics?s=ua&page="+parseInt(a.page||1),ua:"okhttp/3.2.0",timeout:120,nativerequest:!0,successfn:function(b,d){a.callback&&a.callback({result:b,header:d})}};return obj_contact({header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+"comics?s=ua&page="+parseInt(a.page||1)),errorfn:function(b,d,f){if(401==d&&(b=pluginfo(a.plugin),b.user&&b.password)){plugfns(a.plugin).login(b.user,b.password,a,{callback:function(b,c){a.callback({error:"network"})},errorfn:function(b,
c,d){a.callback({error:"network"})},showinfo:""});return}a.callback({error:"network"})}},b)},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=b.data.comics.docs;array_count(b)&&plugfns(a.plugin).pagedeal(b,a)}}}},hotflag:{loader:function(a){var b={url:pluginfo(a.plugin).apihost+"comics/random",ua:"okhttp/3.2.0",timeout:120,nativerequest:!0,successfn:function(b,d){a.callback&&a.callback({result:b,header:d})}};return obj_contact({header:plugfns(a.plugin).headers(a,pluginfo(a.plugin).apihost+
"comics/random"),errorfn:function(b,d,f){if(401==d&&(b=pluginfo(a.plugin),b.user&&b.password)){plugfns(a.plugin).login(b.user,b.password,a,{callback:function(b,c){a.callback({error:"network"})},errorfn:function(b,c,d){a.callback({error:"network"})},showinfo:""});return}a.callback({error:"network"})}},b)},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=b.data.comics;array_count(b)&&plugfns(a.plugin).pagedeal(b,a)}}}}},fns:{crack:function(a,b,c,d,f){function g(a,b){a=a.toLowerCase();
console.log([a,b]);var c=c||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;b&&c.mixIn(b);c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.$super.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,
c){a=this.words=a||[];this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;a=a.sigBytes;this.clamp();if(d%4)for(var e=0;e<a;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-e%4*8&255)<<24-(d+e)%4*8;else if(65535<c.length)for(e=0;e<a;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);this.sigBytes+=a;return this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8;b.length=a.ceil(c/4)},clone:function(){var a=
e.clone.call(this);a.words=this.words.slice(0);return a},random:function(b){for(var c=[],d=0;d<b;d+=4)c.push(4294967296*a.random()|0);return f.create(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++){var e=b[d>>>2]>>>24-d%4*8&255;c.push((e>>>4).toString(16));c.push((e&15).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return f.create(c,b/2)}},k=g.Latin1={stringify:function(a){var b=
a.words;a=a.sigBytes;for(var c=[],d=0;d<a;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-d%4*8&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d++)c[d>>>2]|=(a.charCodeAt(d)&255)<<24-d%4*8;return f.create(c,b)}},w=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(k.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return k.parse(unescape(encodeURIComponent(a)))}},t=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=
f.create();this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=w.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,t=this.blockSize,g=e/(4*t),g=b?a.ceil(g):a.max((g|0)-this._minBufferSize,0);b=g*t;e=a.min(4*b,e);if(b){for(var n=0;n<b;n+=t)this._doProcessBlock(d,n);n=d.splice(0,b);c.sigBytes-=e}return f.create(n,e)},clone:function(){var a=e.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});d.Hasher=
t.extend({init:function(){this.reset()},reset:function(){t.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);this._doFinalize();return this._hash},clone:function(){var a=t.clone.call(this);a._hash=this._hash.clone();return a},blockSize:16,_createHelper:function(a){return function(b,c){return a.create(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return n.HMAC.create(a,c).finalize(b)}}});var n=
c.algo={};return c}(Math);(function(a){var b=c,d=b.lib,e=d.WordArray,d=d.Hasher,f=b.algo,g=[],k=[];(function(){function b(c){for(var d=a.sqrt(c),e=2;e<=d;e++)if(!(c%e))return!1;return!0}function c(a){return 4294967296*(a-(a|0))|0}for(var d=2,e=0;64>e;)b(d)&&(8>e&&(g[e]=c(a.pow(d,.5))),k[e]=c(a.pow(d,1/3)),e++),d++})();var r=[],f=f.SHA256=d.extend({_doReset:function(){this._hash=e.create(g.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],q=c[5],
l=c[6],v=c[7],m=0;64>m;m++){if(16>m)r[m]=a[b+m]|0;else{var p=r[m-15],u=r[m-2];r[m]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+r[m-7]+((u<<15|u>>>17)^(u<<13|u>>>19)^u>>>10)+r[m-16]}p=v+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&q^~h&l)+k[m]+r[m];u=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f);v=l;l=q;q=h;h=g+p|0;g=f;f=e;e=d;d=p+u|0}c[0]=c[0]+d|0;c[1]=c[1]+e|0;c[2]=c[2]+f|0;c[3]=c[3]+g|0;c[4]=c[4]+h|0;c[5]=c[5]+q|0;c[6]=c[6]+l|0;c[7]=c[7]+v|0},_doFinalize:function(){var a=this._data,b=
a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32;b[(d+64>>>9<<4)+15]=c;a.sigBytes=4*b.length;this._process()}});b.SHA256=d._createHelper(f);b.HmacSHA256=d._createHmacHelper(f)})(Math);(function(){var a=c,b=a.enc.Utf8;a.algo.HMAC=a.lib.Base.extend({init:function(a,c){a=this._hasher=a.create();"string"==typeof c&&(c=b.parse(c));var d=a.blockSize,e=4*d;c.sigBytes>e&&(c=a.finalize(c));for(var f=this._oKey=c.clone(),g=this._iKey=c.clone(),h=f.words,k=g.words,l=0;l<d;l++)h[l]^=1549556828,
k[l]^=909522486;f.sigBytes=g.sigBytes=e;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=this._hasher;a=b.finalize(a);b.reset();return b.finalize(this._oKey.clone().concat(a))}})})();return c.HmacSHA256(a,b)+""}return function(a,b,c,d,f){b=b||"GET";d=d||"37";f=f||"2.1.0.2";c=c||"7717b1356b7a41d9a275382763f9c427";a=a.replace("https://picaapi.picacomic.com/","");var q=parseInt((new Date).getTime()/
1E3)+0+"";a=["https://picaapi.picacomic.com/",a,q,c,b,"C69BAF41DA5ABD1FFEDC6D2FEA56B",f,d];a=a[1]+a[2]+a[3]+a[4]+a[5];a=g(a,"~n}$S9$lGts=U)8zfL/R.PM9;4[3|@/CEsl~Kk!7?BYZ:BAa5zkkRBL7r|1/*Cr");return{"api-key":"C69BAF41DA5ABD1FFEDC6D2FEA56B",accept:"application/vnd.picacomic.com.v1+json",time:q,nonce:c,signature:a,"app-version":f,"app-uuid":"2f52e49c-76c1-333e-b214-e9499afe8401","app-platform":"android","app-build-version":d}}(a,b,c,d,f)},headers:function(a,b,c){return obj_contact({"api-key":"C69BAF41DA5ABD1FFEDC6D2FEA56B",
accept:"application/vnd.picacomic.com.v1+json",authorization:pluginfo(a.plugin).authorization,"app-version":"2.0.3.11","app-platform":"android","app-uuid":"2f52e49c-76c1-333e-b214-e9499afe8401","Content-Type":"application/json; charset=UTF-8",Host:"picaapi.picacomic.com"},plugfns(a.plugin).crack(b,c))},login:function(a,b,c,d){c=c||{};d=d||{};ExView.modules.curl({url:pluginfo(c.plugin).apihost+"auth/sign-in",method:"POST",data:'{"email":"'+a+'","password":"'+b+'"}',ua:"okhttp/3.2.0",timeout:120,header:plugfns(c.plugin).headers(c,
pluginfo(c.plugin).apihost+"auth/sign-in","POST"),nativerequest:!0,successfn:function(f,g){try{var e=JSON.parse(f).data.token;ExView.fw.hidePreloader();pluginfo(c.plugin,1,"user",a);pluginfo(c.plugin,1,"password",b);pluginfo(c.plugin,1,"authorization",e);d.callback?d.callback(f,g,e):ExView.fw.alert("已经成功登陆哔咔哔咔！",sessionStorage.modaltitleextra+"登陆成功",function(){$$(".login-screen.modal-in").css("display","none");ExView.workers.index.loader();
ExView.workers.type.loader()})}catch(k){d.errorfn?d.errorfn(k):ExView.fw.alert(k,sessionStorage.modaltitleextra+"登陆失败")}},errorfn:d.errorfn||function(a){ExView.fw.hidePreloader();ExView.fw.alert(a,sessionStorage.modaltitleextra+"登陆失败")},showinfo:void 0==d.showinfo?{text:"正在登陆哔咔哔咔...",title:"登陆",img:pluginfo(c.plugin).icon}:""})},initloginscreen:function(a){a=a||{};setloginscreen('<div class="login-screen-title">哔咔哔咔</div><form><div class="list-block inputs-list"><ul><li class="item-content"><div class="item-inner"><div class="item-title label">邮箱</div><div class="item-input item-input-field"><input type="text" id="login-username" name="username" placeholder="Your MailBox"></div></div></li><li class="item-content"><div class="item-inner"><div class="item-title label">密码</div><div class="item-input item-input-field"><input id="login-password" type="password" name="password" placeholder="Your Password"></div></div></li></ul></div><div class="content-block"><a href="#" id="login-login" class="button button-big">登录</a>\x3c!--href="#" id="login-reg" class="button button-big">注册</a--\x3e<a href="#" id="login-cancle" class="button button-big close-login-screen">取消</a></div><div style="position:absolute;bottom:0;text-align:center;margin:0;padding:0;width:100%"><div class="list-block-label">ExView不提供和传播任何资源，所有资源均来源于互联网！</div></div></form>');
var b=pluginfo(a.plugin);b.user&&$$("#login-username").val(b.user);b.password&&$$("#login-password").val(b.password);$$("#login-reg").on("click",function(){});$$("#login-login").on("click",function(){$$("#login-username").val()&&$$("#login-password").val()?plugfns(a.plugin).login($$("#login-username").val(),$$("#login-password").val(),a):ExView.fw.alert("用户名和密码不能为空！",sessionStorage.modaltitleextra+"ExView")});$$("#login-cancle").on("click",function(){})},
pagedeal:function(a,b){b=b||{};(a||[]).forEach(function(a){var d=function(a){return'<span style="font-size:10px;"><span class="color-white bg-'+getnowtheme()+'" style="padding:3px;border-radius:3px;margin-right:3px;">'+a+"</span></span>"},f=a._id,g=a.title,e=a.finished,k=a.categories,h=a.author,l=d(a.pagesCount+"P");k.forEach(function(a){l+=d(a)});a=a.thumb.fileServer+"/static/"+a.thumb.path;e="【"+(e?"完结":"连载")+"】By "+h;h=l;if(b.multupdate)return b.multupdate(obj_contact(b,
{pid:f,img:a,title:g,content:e})),!1;if(b.multhot)return b.multhot(obj_contact(b,{pid:f,img:a,title:g,content:e})),!1;if(b.multsearch)return b.multsearch(obj_contact(b,{pid:f,img:a,title:g,content:e})),!1;b.callback&&b.callback({pid:f,title:g,img:a,content:h,stitle:e,comment:1,preview:0,extrabutton:""})})}}});
