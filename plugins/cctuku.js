ExView.Plugins({info:{name:"CC\u56fe\u5e93\u6f2b\u753b",version:"2.2",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABCFBMVEUAAAD80wD71wLfxRPCpg7mxgb42AX+2QP83gHb2da9s4VzcnJGQ1rMrxXfwQz70wvnyAvjxAvfxQrLrgr31AbvzAX40wPzzwP11wH81QDW1NPT0dKxsbKmpaafnZe8tJa4sZW2rZGln5DBt3/97n356XyZkHiwpHa0qHOpnm+Be27p2We9rWKwoWHEtF314Vmpm1iOgVLLt06Mfk2pmUz/6kvQuUZST0bLtEOikUP94ELMuECaiTw8PDxSTDMzMzPArDBLPyqhiynFryfbxCTNtSBgUCD82RzgwBqEbxnIrBjBphi/pBWljRXRshJLQA/30w7jyw64nAvx1AftyweskgX/6AP42wNLuxxrAAAAAXRSTlMAQObYZgAAAKdJREFUGNONjkUOw0AMRWeapEkhzGVmZmZm7v1vUkuz6DZvYek/f8lGzgh5PL5wot7MBEn2NnbUbFSsas91fAw5mR6w9FnqbI2Hcu/CPiVia+4XaEv1bz5XhFYixrb6lk8uc09/Jwi5MCAdLjA5quwjQj/CtIVcAAEKCIM3MXbHyNEWB+bW0zFXmhJTo9ysNpShUokgQjS7YFjotfP/7/s882KWBeSAH7VZEHpFpIFlAAAAAElFTkSuQmCC",
db:"cctuku",apihost:"http://m.tuku.cc/",pagetitle:["<br>","\u6536\u85cf","\u9996\u9875","\u7c7b\u578b","\u4e0b\u8f7d"],lazyload:!0,download:!0,setting:!0,gallerymode:!0,typelistmode:!0,theme:"amber",cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader()}})},flags:{indexflag:{loader:function(a){a.front||a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);a.front||a.page||addtypelist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u7c7b\u578b<br>\u6b63\u5728\u52a0\u8f7d...<div class="progress"></span></div>',
2);return{url:pluginfo(a.plugin).apihost,method:"GET",timeout:120,successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));ExView.workers.type.finder({result:b,plugin:a.plugin});a.successfn&&a.successfn({result:b,header:c})},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',
2);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")},canclefn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',2)},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+
"\u9875":""),name:"\u9996\u9875",title:a.title,img:a.img}}},finder:function(a){return{reg:/main-list-con">(.*?)<\/div>/g,str:getresult(a.result),find:"$1",successfn:function(a){console.log(JSON.stringify(a));if(a){var c=getstr(/\/comic\/(\d+)\//,a),d=getstr(/alt="((?!\").*?)"/,a),e=getstr(/src="((?!\").*?)"/,a);a=gettext(getstr(/"orange-footnotes">((?!\").*?)<\/a>/,a));addcardlist({pid:c,title:d,img:e,content:a,comment:1})}else addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',
2)},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="-1|\u9996\u9875|index";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},typeflag:{loader:function(a){return{successfn:function(){ExView.workers.index.loader()}}},finder:function(a){addtypelist({title:"\u9996\u9875",
img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u9996\u9875"});addtypelist({tid:"",title:"\u4eca\u65e5\u6f2b\u753b",listflag:"newest",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u4eca\u65e5\u6f2b\u753b"});addtypelist({tid:"",title:"\u70ed\u95e8\u8fde\u8f7d",listflag:"lianzai",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u70ed\u95e8\u8fde\u8f7d"});return{reg:/href="\/list\/(list|comic)_(\d+)_1.htm"\s*>((?!<).*?)<\/a>/g,
str:a.result,find:"$1{{separator}}$2{{separator}}$3",successfn:function(b){b=b.split("{{separator}}");array_count(b)?addtypelist({tid:b[1],title:b[2],img:pluginfo(a.plugin).icon,group:{name:"fenlei",title:"\u5206\u7c7b"},listflag:b[0],content:b[2]}):addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',2)}}}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+
("newest"==a.flag||"lianzai"==a.flag?a.flag+"/"+(a.page||1):"list/"+a.flag+"_"+a.keyword+"_"+(a.page||1)+".htm"),method:"GET",timeout:120,successfn:function(b,c){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:c})),a.successfn&&a.successfn({result:b,header:c})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":
""),name:"\u3010"+a.title+"\u3011",title:a.title,img:a.img}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b){b?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="0|"+a.keyword+"|list";mySession.nowlistpage=1;console.log(mySession.nowlistpages);
return!0}}}},searchflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/search?word="+a.keyword+"&page="+(a.page||1),method:"GET",timeout:120,successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.keyword+"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01",
"ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b,c,d){console.log(b);b?plugfns(a.plugin).pagedeal(b,a):a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},
countfinder:function(a){return{successfn:function(b){mySession.nowlistpages="0|"+a.keyword+"|search";mySession.nowlistpage=1;console.log(mySession.nowlistpages)}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/"+a.pid+"/",method:"GET",timeout:120,successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u5185\u5bb9\u9875...",
title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{reg:/<a href="\/comic\/(\d+)\/([\w,\d,\-]+)\/">\s*((?!<).*?)\s*<\/a>/g,str:getstr(/<ul\s*class="list-body">(.*?)<\/ul>/,getresult(a.result)),find:{pid:"$1",cid:"$2",title:"$3"},successfn:function(b,c,d,e){console.log(typeof b);if(array_count(b)){if(a.checkupdate)return{pid:b.pid,cid:b.cid,title:b.title};additemlist({id:c.length-d-1,newest:a.newest&&0==d,pid:b.pid,cid:b.cid,title:b.title,count:c.length,
reverse:1})}else a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},afterfn:function(){a.checkupdate||ExView.workers.content.infofinder(a)}}},infoloader:function(a){return!1},infofinder:function(a){console.log(a);return{reg:/<div class="container book-title">(.*?)<div\s*class="book-details-all"/g,str:getresult(a.result),find:"$1",successfn:function(b,c,d,e){console.log(JSON.stringify(b));c=getstr(/<img(?!<).*?src="((?!\").*?)"/,
b);d=getstr(/<h1>((?!<).*?)<\/h1>/,b);e=gettext(getstr(/<dt>\u4f5c\u8005\uff1a<\/dt><dd>(.*?)<\/dd>/,b).trim());var f=gettext(getstr(/<dt>\u7c7b\u522b\uff1a<\/dt><dd>(.*?)<\/dd>/,b).trim().replace(/<a\s*href="\/list\/list_\d+_\d+.htm">/g,","));gettext(getstr(/<dt>\u5730\u533a\uff1a<\/dt><dd>(.*?)<\/dd>/,b).trim());var k=gettext(getstr(/<dt>\u66f4\u65b0\u81f3\uff1a<\/dt><dd>(.*?)<\/dd>/,b).trim()),g=gettext(getstr(/<dt>\u66f4\u65b0\u4e8e\uff1a<\/dt><dd>(.*?)<\/dd>/,b).trim());b=getstr(/class="book-details">(.*?)<\/div>/,
b).trim();var h=gettag(f),h=f.split(",").map(function(a){return gettag(a.trim())}).join(""),h=h+e.split(",").map(function(a){return gettag(a.trim())}).join("");setlistpic({name:d,img:c,added:a.data,description:"<p>\u3010\u4f5c\u8005\u3011"+e+"<br>\u3010\u7c7b\u578b\u3011"+f.replace(/,/g," ")+"<br>\u3010\u6700\u65b0\u8bdd\u3011"+k+"<br>\u3010\u66f4\u65b0\u65e5\u671f\u3011"+g+"<br>\u3010\u7b80\u4ecb\u3011"+gettext(b)+"</p>",comment:1,preview:0,tags:gettag(d)+gettag(status)+h,sourceurl:pluginfo(a.plugin).apihost+
"comic/"+a.pid+"/"});return!0}}}},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/"+a.pid+"/"+a.cid+"/",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u56fe\u7247\u4fe1\u606f...",title:"\u56fe\u7247",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){console.log(a);return{reg:/<option\s*value="\/comic\/(\d+)\/([\w,\d,\-]+)\/([(\d+)\/]*)"/g,str:a.result,find:{pid:"$1",
ccid:"$2",index:"$3"},successfn:function(b,c,d,e){array_count(e)?(b=e.map(function(b){return getpageload(pluginfo(a.plugin).apihost+"comic/"+b.pid+"/"+b.ccid+"/"+b.index,a.plugin||mySession.nowplugin)}),console.log(b),a.download?chapterpredownload({source:b,download:a.download,plugin:a.plugin}):chapterviewer({source:b,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})):a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,
plugin:a.plugin}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u56fe\u7247\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:function(a){return{url:"http://rtk.um5.cc/comment/get?model=1&item_id="+a.pid+"&page="+parseInt(a.page||1),method:"GET",timeout:120,successfn:function(b,c){b?a.callback&&a.callback({result:b,header:c,commentbrowser:{url:"http://www.tuku.cc/comic/"+a.pid+"/",title:"\u8bc4\u8bba - "+pluginfo(a.plugin).name+'<br><span style="font-size:16px">'+
(myContent.name||"")+"</span>",browser:!1,flag:""}}):a.callback&&a.callback()}}},finder:function(a){console.log(a);return{json:!0,str:(a.result||"").substr(1,a.result.length-2),successfn:function(b,c,d,e){if(array_count(b)){c=b.pages;b=b.list;for(var f in b)a.callback&&a.callback({page:a.page||1,pagecount:c,comment:{text:b[f].message,name:b[f].author_name,avatar:"",type:"received",label:b[f].created_at,day:"",time:"",reverse:1,extra:""}})}}}},send:!1},previewflag:{loader:!1,finder:!1,more:!1},pageimgflag:{parser:function(a){return{reg:/eval\(((?!<).*?)\)\r*\n/g,
str:a.result,find:"$1",successfn:function(b){(function(){var c=getstr(/var\s*serverUrl\s*=\s*'(.*?)'\s*;/,a.result)||"http://tkpic.um5.cc";eval('var serverUrl="'+c+'";'+eval("("+b+")"));c=getstr(/var\s*page\s*=\s*(\d+)\s*;/,a.result);a.loadimgurl(getImgUrl(c,0))})()}}}},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"newest/"+(a.page||1),method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,
str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b){console.log(JSON.stringify(b));b&&plugfns(a.plugin).pagedeal(b,a)}}}},hotflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"lianzai/"+(a.page||1),method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b){console.log(JSON.stringify(b));b&&plugfns(a.plugin).pagedeal(b,
a)}}}}},fns:{pagerule:/<div\s*class="row">((?:.|[\r\n])*?)<\/font><\/dd><\/dl>/g,pagefind:"$1",pagedeal:function(a,b){b=b||{};a=getresult(a);var c=getstr(/\/comic\/(\d+)\//,a),d=gettext(getstr(/<div\s*class="book-name">(.*?)<\/div>/,a)),e=getstr(/src="((?!\").*?)"/,a),f=gettext(getstr(/<dt>\u4f5c\u8005\uff1a<\/dt><dd>(.*?)<\/dd>/,a).trim()),k=gettext(getstr(/<dt>\u7c7b\u522b\uff1a<\/dt><dd>(.*?)<\/dd>/,a).trim()),g=gettext(getstr(/<dt>\u66f4\u65b0\u81f3\uff1a<\/dt><dd>(.*?)<\/dd>/,a).trim()),h=gettext(getstr(/<dt>\u66f4\u65b0\u4e8e\uff1a<\/dt><dd>(.*?)$/,
a).trim());if(b.multupdate)return b.multupdate(obj_contact(b,{pid:c,img:e,title:d,content:g})),!1;if(b.multhot)return b.multhot(obj_contact(b,{pid:c,img:e,title:d,content:g})),!1;if(b.multsearch)return b.multsearch(obj_contact(b,{pid:c,img:e,title:d,content:g})),!1;addcardlist({pid:c,title:d,name:d,img:e,content:(k?"\u3010\u7c7b\u578b\u3011"+k+"<br>":"")+(f.replace(/&nbsp;/g,"")?"\u3010\u4f5c\u8005\u3011"+f+"<br>":"")+"\u3010\u6700\u65b0\u3011"+g,stitle:(status?"\u3010"+status+"\u3011":"")+h,comment:1,
preview:0,extrabutton:""})}}});
