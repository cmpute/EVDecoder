ExView.Plugins({info:{name:"SF\u6587\u5e93",version:"2.2",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAB1FBMVEVdAQlnAwxsCBdoERtzDxd8DBeIAxOSAQuGAAhwAQf/7vr/6O1lEhpsDxlqDhaJChWTBxVlCBBhAQtqAgn/6vf/7/T/6vT/7u//4ez/1t2wkZjChJDcgIy2XGmmU2OMNEN/Iit2FCKWEx6kFR2VDx10FBxyEhx+ERyZFBukEBuFEhqADhmhDhh2Ehd3DReHDhZwCxacChVyExRhDRSZEhNrAhODBBJeAhB6BA+TCQ6PBQ59BA5yAwxuAgyCAQqJBAn/8v3/7PP/8/D/2uj/5Of/2eT93uP/0Nj/ytX/wtPwtsT/uMHptr/8rr75sb3/sbzasbnVubj/qrf/q7T4qLHWpK/rma//n624o6zipariranOoajcmKXHl6PBlp3YiJWwjZG6govFfIewf4LKeH6ndnq8cXaocXada3S3ZXSya3PNYnKRZm+wXm3BVmixXmaqVmWYZWSgUF2dSF2oTleLUFaiSFGmPFByR06KPEqiPkiuMEZjLTpyLDeQHC9vKC5qJC6GIiqvHSpxICmGGyVkFiSMEyJ4ESKJEyFVFh95EB+TERtuERt2EBtaERp6EBqDCxeUERZnExNvBRN2BhJkAxKdExF0DRGfERBaBA1gAgqPAwbCbYx2AAABDElEQVQY0wXBA4LDABAAwI2Tuk1t23bPtm3btm3fZzsDZxaX1+X9+Yq+OoVuh+MCQlSISqfoQoGm88lszg+Wf0qU+fAkSRGdzzBZAqIpitxrb57fJ8k4w+aewZkWXal6l9uWjm4I+5bRDmZh/I47/oSh3Vresar+Ae5ftmenKzSXqFaq5Com+GD1GGpHJ+UDAl1Jj3qVZwMrsVte1zAkM6xw1C2bERzMRHX/QeeIbG2RM6gcAxyEp4rWnYUq7slw5aHeJLmGAN5XVirlzNzWdPCDsRgKAeZtqrFrXa+Rb/jfEQkf3AwrSXyiuqY5MYsACCCIIAgqRkAMfwCJ3wgYbSb80RcOf/sEGIbxzos0mTgK2nazfQAAAABJRU5ErkJggg==",
author:"Gentle",type:"text",db:"sfacg",apihost:"http://m.sfacg.com/",pagetitle:["<br>","\u6536\u85cf","\u9996\u9875","\u7c7b\u578b","\u4e0b\u8f7d"],lazyload:!0,download:!0,setting:!0,theme:"pink",typelistmode:!0,smallpicmode:!0,requestcookie:"",cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader();ExView.workers.type.loader()}})},flags:{indexflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost,method:"GET",
timeout:120,successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),title:a.title,name:"\u9996\u9875",img:a.img}}},finder:function(a){return{reg:/\/b\/(\d+)\/"><img\s*src="((?!\").*?)"><br>((?!<).*?)<\/a>/g,str:a.result,find:{pid:"$1",img:"$2",title:"$3"},successfn:function(a){console.log(JSON.stringify(a));array_count(a)?addcardlist({pid:a.pid,
title:a.title,img:a.img,comment:1}):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',2)},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="-1|\u9996\u9875|index";mySession.nowlistpage=
1;console.log(mySession.nowlistpages);return!0}}}},typeflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"search.html",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){addtypelist({title:"\u9996\u9875",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u9996\u9875"});addtypelist({tid:"latest",listflag:"api",title:"\u66f4\u65b0",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},
content:"\u66f4\u65b0"});addtypelist({tid:"",listflag:"rank/original.html",title:"\u539f\u521b\u6392\u884c",img:pluginfo(a.plugin).icon,group:{name:"paihang",title:"\u6392\u884c"},content:"\u539f\u521b\u6392\u884c"});addtypelist({tid:"",listflag:"rank/sale.html",title:"\u70ed\u9500\u6392\u884c",img:pluginfo(a.plugin).icon,group:{name:"paihang",title:"\u6392\u884c"},content:"\u70ed\u9500\u6392\u884c"});addtypelist({tid:"",listflag:"rank/jp.html",title:"\u65e5\u8f7b\u6392\u884c",img:pluginfo(a.plugin).icon,
group:{name:"paihang",title:"\u6392\u884c"},content:"\u65e5\u8f7b\u6392\u884c"});addtypelist({tid:"",listflag:"rank/new.html",title:"\u65b0\u4e66\u6392\u884c",img:pluginfo(a.plugin).icon,group:{name:"paihang",title:"\u6392\u884c"},content:"\u65b0\u4e66\u6392\u884c"});addtypelist({tid:"",listflag:"rank/ticket.html",title:"\u6708\u7968\u6392\u884c",img:pluginfo(a.plugin).icon,group:{name:"paihang",title:"\u6392\u884c"},content:"\u6708\u7968\u6392\u884c"});addtypelist({tid:"",listflag:"rank/bm.html",
title:"\u6536\u85cf\u6392\u884c",img:pluginfo(a.plugin).icon,group:{name:"paihang",title:"\u6392\u884c"},content:"\u6536\u85cf\u6392\u884c"});addtypelist({tid:"jpnovels&listype=latest",listflag:"api",title:"\u65e5\u8f7b\u6700\u65b0",img:pluginfo(a.plugin).icon,group:{name:"riqing",title:"\u65e5\u8f7b"},content:"\u65e5\u8f7b\u6700\u65b0"});addtypelist({tid:"jpnovels&listype=hot",listflag:"api",title:"\u65e5\u8f7b\u70ed\u95e8",img:pluginfo(a.plugin).icon,group:{name:"riqing",title:"\u65e5\u8f7b"},content:"\u65e5\u8f7b\u70ed\u95e8"});
addtypelist({tid:"jpnovels&listype=finish",listflag:"api",title:"\u65e5\u8f7b\u5b8c\u7ed3",img:pluginfo(a.plugin).icon,group:{name:"riqing",title:"\u65e5\u8f7b"},content:"\u65e5\u8f7b\u5b8c\u7ed3"});return{reg:/\/search\.html\?type=(\d+)"><li>((?!<).*?)<\/li>/g,str:getresult(a.result),find:"$1{{separator}}$2",successfn:function(b){b=b.split("{{separator}}");array_count(b)?addtypelist({tid:b[0],title:b[1],img:pluginfo(a.plugin).icon,group:{name:"fenlei",title:"\u5206\u7c7b"},content:b[1]}):addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',
2)}}}},listflag:{loader:function(a){if(a.keyword&&!a.flag){a.urltype=1;var b=pluginfo(a.plugin).apihost+"API/HTML5.ashx?op=novelbytype";return{url:b,method:"POST",data:"tid="+a.keyword+"&pi="+(a.page||1),timeout:120,successfn:function(b,f){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:f,urltype:a.urltype})),a.successfn&&a.successfn({result:b,header:f})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01",
"ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),title:a.title,name:"\u3010"+a.title+"\u3011",img:a.img}}}"api"==a.flag&&(a.urltype=2,b=pluginfo(a.plugin).apihost+"API/HTML5.ashx?op="+a.keyword+"&index="+(a.page||1));!a.keyword&&a.flag&&(a.urltype=3,b=pluginfo(a.plugin).apihost+a.flag);return{url:b,method:"GET",timeout:120,successfn:function(b,f){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:f})),a.successfn&&a.successfn({result:b,
header:f,urltype:a.urltype})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),title:a.title,name:"\u3010"+a.title+"\u3011",img:a.img}}},finder:function(a){switch(a.urltype){case 1:return{json:!0,str:a.result,successfn:function(b){b=b.Novels;array_count(b)?b.forEach(function(b){var f=b.NovelID,g="http://rs.sfacg.com/web/novel/images/NovelCover/Big/"+
b.NovelCover,d=b.NovelName,e=b.AuthorName,h=b.TypeName;b=b.Point;e=(e?"\u3010\u4f5c\u8005\u3011"+e+"<br>":"")+(h?"\u3010\u7c7b\u578b\u3011"+h+"<br>":"")+(b?"\u3010\u8bc4\u5206\u3011"+b:"");plugfns(a.plugin).pagedeal({pid:f,img:g,title:d,stitle:h,content:e})}):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}};case 2:return{json:!0,str:decodeURIComponent(a.result),successfn:function(b){if(array_count(b)){var c=b.NovelID,f="http://rs.sfacg.com/web/novel/images/NovelCover/Big/"+
b.NovelCover,g=b.NovelName,d=b.AuthorName,e=b.TypeName;b=b.Point;d=(d?"\u3010\u4f5c\u8005\u3011"+d+"<br>":"")+(e?"\u3010\u7c7b\u578b\u3011"+e+"<br>":"")+(b?"\u3010\u8bc4\u5206\u3011"+b:"");plugfns(a.plugin).pagedeal({pid:c,img:f,title:g,stitle:e,content:d})}else addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}};default:case 3:return{reg:/\/b\/(\d+)\/">(.*?)<\/a>/g,str:getresult(a.result),find:{pid:"$1",content:"$2"},successfn:function(b){if(array_count(b)){var c=
b.pid,f=getstr(/src="((?!\").*?)"/,b.content),g=getstr(/id="book_title">((?!<).*?)</,b.content);b=getstr(/<span>((?!<).*?)</,b.content);plugfns(a.plugin).pagedeal({pid:c,img:f,title:g,stitle:b,content:b})}else addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(b){mySession.nowlistpages=(3==a.urltype?"-1":"0")+"|"+a.keyword+"|list";mySession.nowlistpage=
1;console.log(mySession.nowlistpages);return!0}}}},searchflag:{loader:function(a){return 1<parseInt(a.page)?(a.multsearch&&a.multsearch(),!1):{url:pluginfo(a.plugin).apihost+"API/HTML5.ashx?op=search&keyword="+a.keyword,method:"GET",timeout:120,successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),
mySession.isloading=0,ExView.fw.alert("\u3010"+a.keyword+"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,f){console.log(b);b=b.Novels;array_count(b)?b.forEach(function(b){var c=b.NovelID,f="http://rs.sfacg.com/web/novel/images/NovelCover/Big/"+b.NovelCover,
h=b.NovelName,k=b.AuthorName,l=b.TypeName;b=b.Point;k=(k?"\u3010\u4f5c\u8005\u3011"+k+"<br>":"")+(l?"\u3010\u7c7b\u578b\u3011"+l+"<br>":"")+(b?"\u3010\u8bc4\u5206\u3011"+b:"");plugfns(a.plugin).pagedeal({pid:c,img:f,title:h,stitle:l,content:k},a)}):a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(b){mySession.nowlistpages=
"-1|"+a.keyword+"|search";mySession.nowlistpage=1;console.log(mySession.nowlistpages)}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"i/"+a.pid+"/",method:"GET",timeout:120,successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u76ee\u5f55...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),
img:getlistimg(a.pid)}}},finder:function(a){var b=[],c=getstrs(getresult(a.result),/class="mulu">((?!<).*?)<(.*?)<\/ul>/g,"$1{{separator}}$2"),c=c.map(function(a){a=a.split("{{separator}}");var c=a[0];getstrs(a[1],/\/c\/(\d+)\/"><li>((?!<).*?)</g,"$1{{separator}}$2").map(function(a){a=(a||"").split("{{separator}}");b.push({group:{name:"type_"+ExView.tools.md5.hex_md5(c),title:c},item:{cid:a[0],title:a[1]}})})});array_count(b)||(c=getstrs(a.result,/\/c\/(\d+)\/"><li>((?!<).*?)</g,"$1{{separator}}$2"),
b.push({group:{},item:c}));return{successfn:function(c,g,d,e){console.log(typeof c);if(array_count(c)){if(a.checkupdate)return g=b,c=g[g.length-1],d=(c||{}).group.title,c=(c||{}).item,{pid:a.pid,cid:c.cid,title:d+" "+c.title};g=b;e=[];b.map(function(b,c){var d=b.item;e[c]=additemlist({id:c,newest:a.newest&&0==c,pid:a.pid,cid:d.cid,title:d.title,group:b.group,count:g.length,reverse:0});e[c].title=b.group.title+" "+d.title});return e}a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01",
"ExView"))},afterfn:function(){a.checkupdate||ExView.workers.content.infoloader(a)}}},infoloader:function(a){return{url:pluginfo(a.plugin).apihost+"b/"+a.pid+"/",method:"GET",timeout:120,successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u7b80\u4ecb\u4fe1\u606f...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),
img:getlistimg(a.pid)}}},infofinder:function(a){console.log(a);return{reg:/class="book_info"(.*?)class="book_xq_pinglun"/g,str:getresult(a.result),find:"$1",successfn:function(b,c,f,g){c=getstr(/<img(?!<).*?src="((?!\").*?)"/,b);f=getstr(/class="book_newtitle">((?!<).*?)</,b);g=getstrs(b,/class="book_info2"><span>((?!<).*?)<\/span><span>((?!<).*?)<\/span>/g,"$1{{separator}}$2");var d=g[0].split("{{separator}}")[0];g=g[0].split("{{separator}}")[1];var e=getstr(/class="book_info3">(.*?)<\//g,b),h=e.split("<br>")[1],
k=e.split("/")[1],e=e.split("/")[0];b=getstr(/class="book_bk_qs1">(.*?)<\/li>/,b).trim();var l=gettag(d);setlistpic({name:f,img:c,added:a.data,description:"<p>\u3010\u4f5c\u8005\u3011"+e+"<br>\u3010\u7c7b\u578b\u3011"+d+"<br>\u3010\u5b57\u6570\u3011"+k+"<br>\u3010"+g+"\u3011"+h+"<br>\u3010\u7b80\u4ecb\u3011"+gettext(b)+"</p>",sourceurl:pluginfo(a.plugin).apihost+"b/"+a.pid+"/",comment:1,preview:0,tags:gettag(f)+gettag(g)+l+gettag(e)});return!0}}}},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+
"c/"+a.cid+"/",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u6587\u7ae0\u4fe1\u606f...",title:"\u6587\u7ae0",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){console.log(a);return{reg:/class="yuedu Content_Frame"(?!<).*?>(.*?)<ul\s*class="yuedu_menu"/g,str:getresult(a.result),find:"$1",successfn:function(b){b?(b=getarticle(b),console.log(b),a.download?chapterpredownload({type:"text",source:b,
download:a.download,plugin:a.plugin}):chapterviewer({source:b,type:"text",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})):a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u6587\u7ae0\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"API/HTML5.ashx?op=getcmtlist&nid="+
a.pid+"&ctype=short&pi="+(a.page||1),method:"GET",timeout:120,successfn:function(b,c){b?a.callback&&a.callback({result:b,header:c,commentbrowser:{url:pluginfo(a.plugin).apihost+"b/"+a.pid+"/",title:"\u8bc4\u8bba - "+pluginfo(a.plugin).name+'<br><span style="font-size:16px">'+(myContent.name||"")+"</span>",browser:!1,flag:""}}):a.callback&&a.callback()}}},finder:function(a){console.log(a);return{json:!0,str:a.result,successfn:function(b,c,f,g){if(array_count(b)){c=getstr(/class="last">(\d+)<\/a>/,
a.result);b=b.Cmts;for(var d in b)a.callback&&a.callback({page:a.page||1,pagecount:c,comment:{text:b[d].Content.replace(/\"\/images\//g,'"'+pluginfo(a.plugin).apihost+"images/"),name:b[d].DisplayName,avatar:"http://bbs.sfacg.com/"+b[d].Avatar,type:"received",label:b[d].CreateTime,day:"",time:"",reverse:1,extra:""}})}}}},send:!1},previewflag:{loader:!1,finder:!1,more:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"API/HTML5.ashx?op=latest&index="+(a.page||
1),method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:decodeURIComponent(a.result),successfn:function(b){if(array_count(b)){var c=b.NovelID,f="http://rs.sfacg.com/web/novel/images/NovelCover/Big/"+b.NovelCover,g=b.NovelName,d=b.AuthorName,e=b.TypeName;b=b.Point;d=(d?"\u3010\u4f5c\u8005\u3011"+d+"<br>":"")+(e?"\u3010\u7c7b\u578b\u3011"+e+"<br>":"")+(b?"\u3010\u8bc4\u5206\u3011"+b:"");plugfns(a.plugin).pagedeal({pid:c,
img:f,title:g,stitle:e,content:d},a)}else a.multupdate()}}}},hotflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"API/HTML5.ashx?op=jpnovels&listype=latest&index="+(a.page||1),method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:decodeURIComponent(a.result),successfn:function(b){if(array_count(b)){var c=b.NovelID,f="http://rs.sfacg.com/web/novel/images/NovelCover/Big/"+b.NovelCover,g=b.NovelName,d=b.AuthorName,
e=b.TypeName;b=b.Point;d=(d?"\u3010\u4f5c\u8005\u3011"+d+"<br>":"")+(e?"\u3010\u7c7b\u578b\u3011"+e+"<br>":"")+(b?"\u3010\u8bc4\u5206\u3011"+b:"");plugfns(a.plugin).pagedeal({pid:c,img:f,title:g,stitle:e,content:d},a)}else a.multhot()}}}}},fns:{pagedeal:function(a,b){b=b||{};var c=a.pid,f=a.img,g=a.title,d=a.content,e=a.stitle;if(b.multupdate)return b.multupdate(obj_contact(b,{pid:c,img:f,title:g,content:e})),!1;if(b.multhot)return b.multhot(obj_contact(b,{pid:c,img:f,title:g,content:e})),!1;if(b.multsearch)return b.multsearch(obj_contact(b,
{pid:c,img:f,title:g,content:e})),!1;addcardlist({pid:c,title:g,img:f,content:d,comment:1,preview:0,extrabutton:""})}}});
