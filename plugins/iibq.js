ExView.Plugins({info:{name:"\u7cbe\u660e\u773c\u6f2b\u753b",version:"2.2",db:"iibq",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAA5FBMVEX///9MTExTU1NKSkpFRUWVlZVPT0/7/P3z9vfy8vPo6OjFxcWrq6tkZGT6+vrr8PDj4+Pg4OCzs7Olpaajo6SGhIVtbW1gYGD2+frm6e70xt7b29v2utjV1dX0tNXS0tK/v7+urq6tra1ug59bl52ampqPj4/gKIeAgIA1U3lzc3Nqamr88Pb87fXg6+zX3+XR4uTB2NrHz9rc1Niuy87Ly8utucjxnMi3xceotMTvlMO4uLiJs7iSobeGsbZpn6V4iqWsmqPmVJ+RnJ6cnJxKi5LiN4+HiIg6gIg9Wn/dFXxbW1taZhR4AAAAw0lEQVQY002O1c7CYBBEd/cTSt2Lu/O74O7y/u9DaEng3M3JZDKQ8FYqvcMruUO7AKnUU0wu7Zw1/nmKwmaYrXfr6SSlKyJY/36eu6tMnJ0rkxLRH8yz8UpZ9ny9prfIU74XfxlQA8PtI6NdC0eNU8OCf6Pa4UxzScftcj9TYIo2cSxrrCaPH18KgEbFiHNkqEsBd/KhEIxz3vdZJRZmkzwRUcftofO4FZEo2lWD8VB9mGZIaASaQA8STMt2VAXM/L1xA4ZlEIfdiwBbAAAAAElFTkSuQmCC",
apihost:"http://www.iibq.com/",pagetitle:["<br>","\u6536\u85cf","\u9996\u9875","\u7c7b\u578b","\u4e0b\u8f7d"],lazyload:!0,download:!0,setting:!0,commentbar:!1,theme:"brown",cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader();ExView.workers.type.loader()}})},flags:{indexflag:{loader:function(a){a.front||a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);a.front||a.page||addtypelist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u7c7b\u578b<br>\u6b63\u5728\u52a0\u8f7d...<div class="progress"></span></div>',
2);return{url:pluginfo(a.plugin).apihost,method:"GET",timeout:120,successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));a.front||a.page||ExView.workers.type.finder({result:b,plugin:a.plugin});a.successfn&&a.successfn({result:b,header:c})},errorfn:function(){a.page||addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',
2);ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")},canclefn:function(){a.page||addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',2)},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u9996\u9875",title:a.title,img:a.img}}},finder:function(a){return{reg:/\/comic\/(\d+)'><img\s*src='((?!\').*?)'\s*alt='((?!\').*?)'.*?[(\u4eba\u6c23\uff1a)|(\u5f53\u5929\u4eba\u6c14:)]+<em>(\d+)<\/em>/g,
str:a.result,find:{pid:"$1",img:"$2",title:"$3",hot:"$4"},successfn:function(a){console.log(JSON.stringify(a));array_count(a)?addcardlist({pid:a.pid,title:a.title,img:a.img,content:"\u3010\u4eba\u6c14\u3011"+a.hot,comment:1}):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',2)},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01",
"ExView")}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="-1|\u9996\u9875|index";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},typeflag:{loader:function(a){return{successfn:function(){ExView.workers.index.loader()}}},finder:function(a){addtypelist({title:"\u9996\u9875",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u9996\u9875"});addtypelist({tid:"new",listflag:"comicupdate/",
title:"\u6700\u65b0",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u6700\u65b0"});addtypelist({tid:"hot",listflag:"ax/getViewTopDate.aspx?c=-1",title:"\u6700\u70ed",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u6700\u70ed"});var b=getstrs(a.result,/\/class\/(\d+)"\s*title="((?!\").*?)"/g,"$1{{separator}}$2"),b=array_unique(b);b.forEach(function(b){b=b.split("{{separator}}");addtypelist({tid:"class/"+b[0],title:b[1],img:pluginfo(a.plugin).icon,
group:{name:"leixing",title:"\u7c7b\u578b"},content:b[1]})});getstrs(a.result,/\/pinyin\/([\w,\d,\-]+)">((?!<).*?)</g,"$1{{separator}}$2").forEach(function(b){b=b.split("{{separator}}");addtypelist({tid:"pinyin/"+b[0],title:b[1],img:pluginfo(a.plugin).icon,group:{name:"suoyin",title:"\u7d22\u5f15"},content:b[1]})});return{reg:/\/tag\/(\w+)"\s*title="((?!\").*?)"/g,str:a.result,find:"$1{{separator}}$2",successfn:function(b,d,f,e){if(array_count(e))return e.forEach(function(b){b=b.split("{{separator}}");
addtypelist({tid:"tag/"+b[0],title:b[1],img:pluginfo(a.plugin).icon,group:{name:"fenlei",title:"\u5206\u7c7b"},content:b[1]})}),!0}}}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+(a.flag?a.flag:a.keyword+"/"+(a.page||1)+"/"),method:"GET",timeout:120,successfn:function(b,c){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:c})),a.successfn&&a.successfn({result:b,header:c})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01",
"ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.title+"\u3011",title:a.title,img:a.img}}},finder:function(a){return{reg:"new"==a.keyword?/<img\s*src='((?!\').*?)'><\/a><div><a\s*title='((?!\').*?)\u66f4\u65b0'\s*href='(?!\').*?\/comic\/(\d+)'>((?!<).*?)\s*\[((?!<).*?)\]<\/a><\/div><div>((?!<).*?)<\/div>/g:"hot"==a.keyword?/\/comic\/(\d+)'><img\s*src='((?!\').*?)'\s*alt='((?!\').*?)'.*?[(\u4eba\u6c23\uff1a)|(\u5f53\u5929\u4eba\u6c14:)]+<em>(\d+)<\/em>/g:
plugfns(a.plugin).pagerule,str:a.result,find:"new"==a.keyword?{img:"$1",update:"$2",pid:"$3",title:"$4",newest:"$5",author:"$6"}:"hot"==a.keyword?{pid:"$1",img:"$2",title:"$3",hot:"$4"}:plugfns(a.plugin).pagefind,successfn:function(b){array_count(b)?"new"==a.keyword?addcardlist({pid:b.pid,title:b.title,img:b.img,content:"\u3010\u4f5c\u8005\u3011"+b.author+"<br>\u3010\u6700\u65b0\u3011"+b.newest+"<br>\u3010\u66f4\u65b0\u3011"+b.update,comment:1}):"hot"==a.keyword?addcardlist({pid:b.pid,title:b.title,
img:b.img,content:"\u3010\u4eba\u6c14\u3011"+b.hot,comment:1}):plugfns(a.plugin).pagedeal(b,a):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return a.flag?{successfn:function(){return{pagecount:-1}}}:{reg:/\/(\d+)'\s*title='\u6700\u540e\u4e00\u9875'/,str:a.result,find:"$1",successfn:function(b){mySession.nowlistpages=(b||"0")+"|"+a.keyword+"|list";mySession.nowlistpage=
1;console.log(mySession.nowlistpages);return!0}}}},searchflag:{loader:function(a){return 1<parseInt(a.page)?(a.multsearch&&a.multsearch(),!1):{url:pluginfo(a.plugin).apihost+"search/?keyword="+a.keyword,method:"GET",timeout:120,successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),mySession.isloading=
0,ExView.fw.alert("\u3010"+a.keyword+"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return{reg:/<div\s*class='cInfoItem'>(.*?)<\/a>/g,str:a.result,find:"$1",successfn:function(b,c,d){console.log(b);if(b){c=getstr(/\/comic\/(\d+)'/,b);d=getstr(/src='((?!\').*?)'/,b);var f=gettext(getstr(/\d+'>(.*?)<span\s*class='clw/,
b));b=getstr(/class='clw\d+'>\[((?!<).*?)\]<\/span>/,b).replace("\u8bdd","");plugfns(a.plugin).pagedeal({pid:c,img:d,title:f,newest:b},a)}else a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(b){mySession.nowlistpages="-1|"+a.keyword+"|search";mySession.nowlistpage=1;console.log(mySession.nowlistpages)}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+
"comic/"+a.pid+"/",method:"GET",timeout:120,successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u5185\u5bb9\u9875...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{successfn:function(b,c,d,f){var e=[];b=getstrs(getresult(a.result).replace(/class='cVolTag'/g,
"<exview>class='cVolTag'").replace(/id="uyan_frame"/g,'<exview>id="uyan_frame"'),/class='cVolTag'>((?!<).*?)<(.*?)<exview>/g,"$1{{separator}}$2");b=b.map(function(a){a=a.split("{{separator}}");var b=a[0];a=getstrs(a[1],/\/viewcomic(\d+)\/'>((?!<).*?)</g,"$1{{separator}}$2");a.reverse();a.map(function(a){a=(a||"").split("{{separator}}");e.push({group:{name:"type_"+ExView.tools.md5.hex_md5(b),title:b},item:{cid:a[0],title:a[1]}})})});array_count(e)||(b=getstrs(a.result,/\/viewcomic(\d+)\/'>((?!<).*?)</g,
"$1{{separator}}$2"),e.push({group:{},item:b}));if(array_count(e)){if(a.checkupdate)return c=e,b=c[c.length-1],b=(b||{}).item,{pid:a.pid,cid:b.cid,title:b.title};c=e;f=[];e.map(function(b,d){var e=b.item;f[d]=additemlist({id:d,newest:a.newest&&0==d,pid:a.pid,cid:e.cid,title:e.title,group:b.group,count:c.length,reverse:0})});return f}a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},afterfn:function(){a.checkupdate||
ExView.workers.content.infofinder(a)}}},infoloader:function(a){return!1},infofinder:function(a){console.log(a);return{reg:/class="comicInfo"(.*?)class="imgList"/g,str:getresult(a.result),find:"$1",successfn:function(b,c,d,f){try{var e=getstr(/<img\s*src='((?!\').*?)'/,b),g=getstr(/itemprop="name">\s*((?!<).*?)\s*<\/h1>/,getresult(a.result)),k=getstr(/<li>\u5b8c\u7d50\uff1a((?!<).*?)<\/li>/,b),m=getstr(/<li>\u66f4\u65b0\u65e5\u671f\uff1a((?!<).*?)<\/li>/,b),h=gettext(getstr(/<\/span>\u4f5c\u8005\uff1a(.*?)<br\s*\/>/,
b)),n=gettext(getstr(/<li>\u5206\u7c7b\uff1a(.*?)<\/li>/,b)),p=getstr(/itemprop="description">.*?<br\s*\/>(.*?)<\/p>/,b),l=gettag(k)+gettag(n)+gettag(h)}catch(q){}setlistpic({name:g,img:e,added:a.data,description:"<p>\u3010\u4f5c\u8005\u3011"+h+"<br>\u3010\u7c7b\u578b\u3011"+n+"<br>\u3010\u72b6\u6001\u3011"+k+"<br>\u3010\u66f4\u65b0\u3011"+m+"<br>\u3010\u7b80\u4ecb\u3011"+p+"</p>",sourceurl:pluginfo(a.plugin).apihost+"comic/"+a.pid+"/",comment:1,preview:0,tags:gettag(g)+l+gettag(h)});return!0}}}},
parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/"+a.pid+"/viewcomic"+a.cid+"/",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u56fe\u7247\u4fe1\u606f...",title:"\u56fe\u7247",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{reg:/var\s*sFiles="([\d,\w]+)";var\s*sPath="([\d,\w,\/]+)";/g,str:a.result,find:"$1{{separator}}$2",successfn:function(b){if(b){b=b.split("{{separator}}");
try{var c=b[0],d=c,f=d.substring(d.length-1),e="abcdefghijklmnopqrstuvwxyz".indexOf(f)+1,g=d.substring(d.length-e-12,d.length-e-1),d=d.substring(0,d.length-e-12),k=g.substring(0,g.length-1),m=g.substring(g.length-1);for(i=0;i<k.length;i++)d=d.replace(new RegExp(k.substring(i,i+1),"gi"),i);var h=d.split(m),d="";for(i=0;i<h.length;i++)d+=String.fromCharCode(h[i]);var c=d,n=b[1],p=c.split("|"),l=[];for(i=0;i<p.length;i++){var q="http://comic.jmydm.com:8080/"+(n+p[i]).replace(/\//g,"/"),q=getimgload(getcdnload(q,
pluginfo(a.plugin).cdn),a.plugin||mySession.nowplugin,{cacheheader:{Referer:pluginfo(a.plugin).apihost},nativeres:!0});l.push(q)}}catch(r){console.log(r)}console.log(l);a.download?chapterpredownload({source:l,download:a.download,plugin:a.plugin}):chapterviewer({source:l,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})}else a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),
mySession.isloading=0,ExView.fw.alert("\u56fe\u7247\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:function(a){return{url:1==parseInt(a.page||1)?"http://api.uyan.cc/v4/comment/?uid=1834194&url="+pluginfo(a.plugin).apihost+"comic/"+a.pid+"/":"http://api.uyan.cc/v4/action/?sid="+a.sid+"&sort=1&pn="+a.page,method:"GET",timeout:120,successfn:function(b,c){if(b){var d={};1==parseInt(a.page||1)&&(d=ExView.modules.commentpage.uyanloader(b),b=JSON.stringify(d));a.callback&&
a.callback({result:b,header:c,sid:d.sid||a.sid,commentbrowser:{url:"http://api.uyan.cc/v4/comment/?uid=1834194&url="+pluginfo(a.plugin).apihost+"comic/"+a.pid+"/",title:"\u8bc4\u8bba - "+pluginfo(a.plugin).name+'<br><span style="font-size:16px">'+(myContent.name||"")+"</span>",browser:!1,flag:""}})}else a.callback&&a.callback()}}},finder:function(a){console.log(a);return{json:!0,str:a.result,successfn:function(b,c,d,f){b=b||{};1==parseInt(a.page||1)&&(b=b.comments);var e=0<b.more?0:-1;b=(b||[]).data;
array_count(b)&&b.forEach(function(b){a.callback&&a.callback({page:a.page||1,pagecount:e,comment:{text:b.cnt,name:b.uname,avatar:b.uface,type:"received",label:b.time,day:"",time:"",reverse:1}})})}}},send:!1},previewflag:{loader:!1,finder:!1,more:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){return 1<parseInt(a.page||1)?(a.multupdate(),!1):{url:pluginfo(a.plugin).apihost+"comicupdate/",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{reg:/<img\s*src='((?!\').*?)'><\/a><div><a\s*title='((?!\').*?)\u66f4\u65b0'\s*href='(?!\').*?\/comic\/(\d+)'>((?!<).*?)\s*\[((?!<).*?)\]<\/a><\/div><div>((?!<).*?)<\/div>/g,
str:a.result,find:{img:"$1",update:"$2",pid:"$3",title:"$4",newest:"$5",author:"$6"},successfn:function(b){console.log(JSON.stringify(b));array_count(b)&&a.multupdate(obj_contact(a,{pid:b.pid,img:b.img,title:b.title,content:"\u66f4\u65b0\u81f3 "+b.newest+" \u8bdd"}))}}}},hotflag:{loader:function(a){return 1<parseInt(a.page||1)?(a.multhot(),!1):{url:pluginfo(a.plugin).apihost+"ax/getViewTopDate.aspx?c=-1",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},
finder:function(a){return{reg:/\/comic\/(\d+)'><img\s*src='((?!\').*?)'\s*alt='((?!\').*?)'.*?[(\u4eba\u6c23\uff1a)|(\u5f53\u5929\u4eba\u6c14:)]+<em>(\d+)<\/em>/g,str:a.result,find:{pid:"$1",img:"$2",title:"$3",hot:"$4"},successfn:function(b){console.log(JSON.stringify(b));array_count(b)&&a.multhot(obj_contact(a,{pid:b.pid,img:b.img,title:b.title,content:"\u3010\u4eba\u6c14\u3011"+b.hot}))}}}}},fns:{pagerule:/src='((?!\').*?)'><\/a><h3><a\s*href='(?!\').*?\/comic\/(\d+)'(?!<).*?>((?!<).*?)<\/a><\/h3><p>\[(\d+)\]((?!<).*?)<\/p>/g,
pagefind:{img:"$1",pid:"$2",title:"$3",newest:"$4",author:"$5"},pagedeal:function(a,b){b=b||{};try{var c=a.pid,d=a.img,f=a.title,e=a.author,g=a.newest,k=g?"\u66f4\u65b0\u81f3"+g+"\u8bdd":"",m=e?"\u3010\u4f5c\u8005\u3011"+e+"<br>":"",h=k}catch(n){}if(b.multupdate)return b.multupdate(obj_contact(b,{pid:c,img:d,title:f,content:h})),!1;if(b.multhot)return b.multhot(obj_contact(b,{pid:c,img:d,title:f,content:h})),!1;if(b.multsearch)return b.multsearch(obj_contact(b,{pid:c,img:d,title:f,content:h})),!1;
addcardlist({pid:c,title:f,img:d,content:m,stitle:k,comment:1,preview:0,extrabutton:""})}}});
