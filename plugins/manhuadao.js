ExView.Plugins({info:{name:"\u6f2b\u753b\u5c9b",version:"2.2",db:"manhuadao",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAE7SURBVDhPlZO9TsMwFIUzMBQCYkViYGGFhYbCwFDgCXgBxMMg8QoMfYEObAxMINY+AyoFqQ5qKySKaNPKvlzbJ44dVdAcyYp9fM+X6/xEWkqpF6ooznTzcBdeZXG2F2FuJBrrdhzU4BRKT3dJJGskDmNSn0O4RCHgaMNBSEq4ViKJ3Z4cCLhlANPzonHrBi6zxJvz9fBVAnCLKOrvrcDl9o83lwP066sLC/2j+b5WCVAzBenZtrlOHtr0c9eyQf0A9ZVhvhYC5CgtQuhqfHttO/kLIBJbrGaT4o4YNJ+7o/gqPUT7FrLOEw2vmgWAYWa/8R8AgazzyJ+ZdOvBxX6w7ysEoEXdgVkjoL6/grWvADC6bNLH+Q6pbAqHaPp8jxl/DydbfJwYKyv9M71iXlmcfc//yB68pWXDUfQLT6VO2MskC3IAAAAASUVORK5CYII=",
apihost:"http://mhjk.1391.com/",pagetitle:["<br>","\u6536\u85cf","\u6700\u65b0\u66f4\u65b0","\u7c7b\u578b","\u4e0b\u8f7d"],download:!0,lazyload:!0,theme:"red",setting:!0,nativeres:!0,cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader();ExView.workers.type.loader()}})},flags:{indexflag:{loader:function(a){a.front||a.page||setnowlistname("\u6700\u65b0\u66f4\u65b0","",pluginfo(a.plugin).icon);return{url:pluginfo(a.plugin).apihost+
"comic/comicslist?channelid=wandoujia",method:"POST",data:'{"pageno":"'+(a.page||1)+'","pagesize":"20","sort":"1"}',timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));a.successfn&&a.successfn({result:b,header:c})},errorfn:function(){a.page||setnowlistname("\u6700\u65b0\u66f4\u65b0","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=
0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")},canclefn:function(){a.page||setnowlistname("\u6700\u65b0\u66f4\u65b0","",pluginfo(a.plugin).icon)},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u6700\u65b0\u66f4\u65b0",title:a.title,img:a.img}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){console.log(JSON.stringify(b));array_count(b)?(b=b.info.comicsList,plugfns(a.plugin).pagedeal(b,a)):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',
2)},errorfn:function(){a.page||setnowlistname("\u6700\u65b0\u66f4\u65b0","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="0|\u6700\u65b0\u66f4\u65b0|index";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},typeflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/recommendspecial?channelid=wandoujia",
method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){addtypelist({title:"\u6700\u65b0\u66f4\u65b0",img:pluginfo(a.plugin).icon,content:"\u6700\u65b0\u66f4\u65b0"});return{json:!0,str:a.result,successfn:function(a){if(array_count(a)){a=a.info.specials;for(var c=0;c<a.length;c++)addtypelist({tid:a[c].specialid,title:a[c].name,img:a[c].coverurl,
listbg:!0,content:a[c].name})}else addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',2)}}}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/comicslist?channelid=wandoujia",method:"POST",data:'{"pageno":"'+(a.page||1)+'","pagesize":"20","special":"'+a.keyword+'","sort":"1"}',timeout:120,nativerequest:pluginfo(a.plugin).nativeres,
header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:c})),a.successfn&&a.successfn({result:b,header:c})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.title+"\u3011",title:a.title,img:a.img}}},finder:function(a){return{json:!0,
str:a.result,successfn:function(b){array_count(b)?(b=b.info.comicsList,plugfns(a.plugin).pagedeal(b)):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="0|"+a.keyword+"|list";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},searchflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/searchbookauthor?pindex="+
(parseInt(a.page||1)-1)+"&psize=20&name="+encodeURIComponent(a.keyword)+"&type=2&channelid=wandoujia",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),mySession.isloading=
0,ExView.fw.alert("\u3010"+a.keyword+"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,d){console.log(b);array_count(b)?(b=b.info.data.items,plugfns(a.plugin).pagedeal(b,a)):a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',
1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(b){mySession.nowlistpages="0|"+a.keyword+"|search";mySession.nowlistpage=1;console.log(mySession.nowlistpages)}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/downloadcomicsview?bookid="+a.pid+"&channelid=wandoujia",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){b?a.successfn&&a.successfn({result:b,
header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u5185\u5bb9\u9875...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,d,e){if(array_count(b)){b=b.info.bookPartList;if(a.checkupdate)return{pid:a.pid,cid:b[0].part_id,title:b[0].name};e=[];for(d=0;d<b.length;d++)e[d]=
additemlist({id:b.length-1-d,newest:a.newest&&0==d,pid:a.pid,cid:b[d].part_id,title:b[d].name,count:b.length,reverse:1});return e}a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},afterfn:function(){a.checkupdate||ExView.workers.content.infoloader(a)}}},infoloader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/comicsdetail?bookid="+a.pid+"&channelid=wandoujia",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,
header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u7b80\u4ecb\u4fe1\u606f...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},infofinder:function(a){console.log(a);return{json:!0,str:a.result,successfn:function(b,c,d,e){b=b.info.comicsdetail||
{};b=b[0]||{};c=b.coverurl;d=b.book_name;e="<p>"+(1!=b.progresstype?"\u3010\u5b8c\u7ed3\u3011":"\u3010\u8fde\u8f7d\u3011")+b.updatedate+"<br>\u3010\u4f5c\u8005\u3011"+b.book_author.replace(/@@/g,"")+"<br>\u5171"+b.totalpart+"\u8bdd<br>"+b.book_brief+"</p>";setlistpic({name:d,img:c,added:a.data,description:e,comment:0,preview:0,tags:gettag(d)+gettag(b.book_author.replace(/@@/g,""))});return!0}}}},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/comicsread?bookid="+a.pid+"&partid="+
a.cid+"&channelid=wandoujia",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u56fe\u7247\u4fe1\u606f...",title:"\u56fe\u7247",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){console.log(a);return{json:!0,str:a.result,successfn:function(b,c,d,e){array_count(b)?(b=b.info.bookreaddetail.pics,console.log(b),
a.download?chapterpredownload({source:b,download:a.download,plugin:a.plugin}):chapterviewer({source:b,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})):a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u56fe\u7247\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:!1,finder:!1},previewflag:{loader:!1,
finder:!1,more:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/comicslist?channelid=wandoujia",method:"POST",data:'{"pageno":"'+(a.page||1)+'","pagesize":"20","sort":"1"}',timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){console.log(JSON.stringify(b));
array_count(b)&&(b=b.info.comicsList,plugfns(a.plugin).pagedeal(b,a))}}}},hotflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/comicslist?channelid=wandoujia",method:"POST",data:'{"pageno":"'+(a.page||1)+'","pagesize":"20","special":"3","sort":"1"}',timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"Content-Type":"application/json",Referer:""},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){console.log(JSON.stringify(b));
array_count(b)&&(b=b.info.comicsList,plugfns(a.plugin).pagedeal(b,a))}}}}},fns:{pagedeal:function(a,b){b=b||{};a.length||(b.multsearch||b.multupdate||b.multhot?(b.multsearch&&b.multsearch(),b.multupdate&&b.multupdate(),b.multhot&&b.multhot()):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1));for(var c=0;c<a.length;c++){var d=a[c].book_id||a[c].id,e=a[c].coverurl||"img/nopic.png",g=a[c].book_name||a[c].name,k="\u3010"+a[c].subject_name+
"\u3011";if(a[c].name)h="\u3010"+(a[c].author?a[c].author.replace(/@@/g,"|"):"")+"\u3011"+a[c].name+"\u3010\u5171"+a[c].partnumber+"\u8bdd\u3011",f=("1"!=a[c].progresstype?"\u3010\u5b8c\u7ed3\u3011":"\u3010\u8fde\u8f7d\u3011")+(a[c].updatedate?" "+a[c].updatedate:"");else var h="\u3010"+(a[c].book_author?a[c].book_author.replace(/@@/g,"|"):"")+"\u3011"+a[c].book_name+"\u3010\u5171"+a[c].totalpart+"\u8bdd\u3011",f=("1"!=a[c].progresstype?"\u3010\u5b8c\u7ed3\u3011":"\u3010\u8fde\u8f7d\u3011")+(a[c].lastpartname?
"\u66f4\u65b0\u81f3"+a[c].lastpartname:"");b.multupdate?b.multupdate(obj_contact(b,{pid:d,img:e,title:g,content:f})):b.multhot?b.multhot(obj_contact(b,{pid:d,img:e,title:g,content:f})):b.multsearch?b.multsearch(obj_contact(b,{pid:d,img:e,title:g,content:f})):addcardlist({pid:d,title:g,name:h,img:e,stitle:k,content:f,comment:0})}}}});
