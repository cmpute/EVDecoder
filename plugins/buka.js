ExView.Plugins({info:{name:"\u5e03\u5361\u6f2b\u753b",version:"2.2",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADS0lEQVQ4jT2TT2wUdRzF3/c3Mzuz022XlloiFUgkghGIkdaDHjSYSrCGxIt4UPSE4sV4MBIOxgOJ0XgiHownE2Kth96qEBIhJIg1KURtaZc/prYFtu1uZzv7Z2Z2Zn+/79cD1Hd6h/dJXvLyCI8kwgQQiEiS6uxB3Sy9Srq8G53EGOm9bfUOXywMDpdEWEFESFkCAAQAwkyklCS1he06nP4271WOcvyAdGoAnUB1qtBRQyfZkz92PXf6Y7//iY1NhjZNO1zu17Vrv3UV63ujSpvZf0HIH4QxBrq1BKfxK3nhJVUt56/3jY4d8vu2tYSZbBApACat/PF5z2PtvY2ySd2dJ1y34AMiABGS3h3YqDwlRry0GJ4bDq6c+QzAKYAtRUQmCf7dknPCY2lYA/UdzrkFH8IGc/NzuHHjOixpwysUKCoezaH4NFC++Harcr+blK0VAOjWyn5bxQNZVmC7ZwcBwO07d1Eq3cLJD07ih7FxdPsO2BugzN8ntqkOtsuz+wHABoAsjnbmfQPDSkgerjIxMYGfJyextLyEUmkeLAwCIFYXE2dWFizuAjClAECJ1UdQoKwqUbMOZoORkRForTF0cAjHj7+LOIpBEKhkTURrcLux9f8GnNb2cK4DD6toVP5GxXkRzx7YhwsXfoHWBp6XQysluO0FUHUaMBa4vrgbAFQcrHUpvXrERAGIWPUk55GuzqBaz6DJg9g+mm0LuU4Zzp2zMOE9JZJHtnD5cBIGrvXRawNfu/rmKKdxxlnLdu0YuXgOpr4Ck9RA8X14tSuwb30DqfwJ0wF1QsmkXn48adYdm8RZif6ZASnX8bZ1C0tGVt7HFpShKzWYuAFOWzCpgQjBxKnU7q47tsso5vsTAoBw/vLz61fH3+/2b75n5yKH4AjZOZEsUbqxAWawdDqkyFCjnOim/fLYrjc+/G7r0OgUCRsFUkJEcu/cm5fy2bVXDHwtSWQrL8+cZjCNulJuXiNr2RvxnqvPnPnrJREhMJMiZbGYjg0A3oETX8ZBjPbaetZs9s+kQUBpUFVhvH02qcft+oMYxUOffgUArDOHLIs33/zozkD19+/fqk2Pvw4A5ckvPlkcP3UaAFamfjqyfP7sOw+zQpvcf9l43aTeM51GAAAAAElFTkSuQmCC",
db:"buka",apihost:"http://m.buka.cn/",pagetitle:["<br>","\u6536\u85cf","\u9996\u9875","\u7c7b\u578b","\u4e0b\u8f7d"],download:!0,lazyload:!0,theme:"orange",setting:!0,cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader();ExView.workers.type.loader()}})},flags:{indexflag:{loader:function(a){a.front||a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);return{url:pluginfo(a.plugin).apihost+"home/get_home_json",
method:"GET",timeout:120,successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));a.successfn&&a.successfn({result:b,header:c})},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")},canclefn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon)},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+
a.page+"\u9875":""),name:"\u9996\u9875",title:a.title,img:a.img}}},finder:function(a){return{json:!0,str:a.result,successfn:function(a){console.log(JSON.stringify(a));a=(a||{}).datas;if(array_count(a))for(var c in a){var d=a[c];array_count(d.items)&&d.items.forEach(function(a){addcardlist({pid:a.mid,title:a.name,img:a.logo,stitle:a.author,comment:1})})}else addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',2)},errorfn:function(){a.page||
setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="-1|\u9996\u9875|index";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},typeflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"category",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&
a.successfn({result:b,header:c})}}},finder:function(a){addtypelist({title:"\u9996\u9875",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u9996\u9875"});addtypelist({tid:"",listflag:"top",title:"\u6392\u884c",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u6392\u884c"});return{reg:/<a\s*href="\/class#(\d+)"\s*class="class-item(?!").*?">((?:.|[\r\n])*?)<\/a>/g,str:a.result,find:"$1{{separator}}$2",successfn:function(a){a=a.split("{{separator}}");
if(array_count(a)){if("58"!=a[0]){var c=getstr(/<img\s*src="((?!").*?)"/,a[1]),d=getstr(/class-item-font">((?!<).*?)<\/div>/,a[1]);addtypelist({tid:a[0],title:d,img:c,listbg:!0,group:{name:"fenlei",title:"\u5206\u7c7b"},content:d})}}else addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',2)}}}},listflag:{loader:function(a){var b=
{"#1":{fun:"14",param:"",gname:"\u6700\u8fd1\u66f4\u65b0"},"#45":{fun:"1",param:"10018",gname:"\u4eca\u65e5\u70ed\u699c"},"#78":{fun:"1",param:"12022",gname:"\u5df2\u5b8c\u7ed3"},"#58":{fun:"104",param:"",gname:"\u6f2b\u5c55\u5468\u8fb9"},"#67":{fun:"1",param:"12011",gname:"ACG\u8d44\u8baf"},"#92":{fun:"1",param:"12036",gname:"\u6761\u6f2b"},"#109":{fun:"1",param:"12053",gname:"\u65e5\u6f2b"},"#107":{fun:"1",param:"12051",gname:"\u65e5\u66f4comics"},"#108":{fun:"1",param:"12052",gname:"\u5b9e\u9a8ccomics"},
"#6":{fun:"1",param:"302",gname:"\u5c11\u5973"},"#8":{fun:"1",param:"206",gname:"\u767e\u5408"},"#65":{fun:"1",param:"12009",gname:"\u80a5\u7682"},"#28":{fun:"1",param:"404",gname:"\u604b\u7231"},"#97":{fun:"1",param:"12041",gname:"\u6b66\u4fa0\u7384\u5e7b"},"#74":{fun:"1",param:"12018",gname:"\u7f51\u6e38\u5f02\u4e16\u754c"},"#19":{fun:"1",param:"202",gname:"\u6cbb\u6108"},"#21":{fun:"1",param:"403",gname:"\u79d1\u5e7b"},"#31":{fun:"1",param:"10008",gname:"\u641e\u7b11"},"#42":{fun:"1",param:"211",
gname:"\u9b3c\u602a"},"#79":{fun:"1",param:"12023",gname:"\u52b1\u5fd7"},"#34":{fun:"1",param:"415",gname:"\u4f53\u80b2"},"#10":{fun:"1",param:"410",gname:"\u683c\u6597"},"#89":{fun:"1",param:"12033",gname:"\u8054\u5408\u51fa\u54c1"},"#49":{fun:"1",param:"10035",gname:"\u5e03\u5361\u5a18"}}["#"+a.keyword]||{};return{url:pluginfo(a.plugin).apihost+("top"==a.flag?"ranking/get_data":"category/ajax_group"),method:"POST",data:"top"!=a.flag?"fun="+b.fun+"&param="+b.param+"&gname="+b.gname+"&count=16&start="+
16*(parseInt(a.page||1)-1):"",timeout:120,header:{"content-type":"application/x-www-form-urlencoded"},successfn:function(b,d){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:d})),a.successfn&&a.successfn({result:b,header:d})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.title+"\u3011",title:a.title,
img:a.img}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){(b=b.datas.items)?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages=("top"==a.flag?"-1":"0")+"|"+a.keyword+"|list";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},searchflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+
"search/ajax_search",method:"POST",data:"key="+encodeURIComponent(a.keyword)+"&count=16&start="+16*(parseInt(a.page||1)-1),timeout:120,header:{"content-type":"application/x-www-form-urlencoded"},successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+
a.keyword+"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,d){b=b.datas.items;console.log(b);b?plugfns(a.plugin).pagedeal(b,a):a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',
1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(b){mySession.nowlistpages="0|"+a.keyword+"|search";mySession.nowlistpage=1;console.log(mySession.nowlistpages)}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"m/"+a.pid,method:"GET",timeout:120,successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01",
"ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u5185\u5bb9\u9875...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{reg:/<a\s*href="\/read\/(\d+)\/(\d+)"(?!<).*?chapter-link">\s*((?!<).*?)\s*<\/a>/g,str:a.result,find:{pid:"$1",cid:"$2",title:"\u7b2c{{-i}}\u8bdd $3"},successfn:function(b,c,d,e){console.log(typeof b);if(array_count(b)){if(a.checkupdate)return{pid:b.pid,cid:b.cid,title:b.title};additemlist({id:c.length-d-1,newest:a.newest&&
0==d,pid:b.pid,cid:b.cid,title:b.title,count:c.length,reverse:1})}else a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},afterfn:function(){a.checkupdate||ExView.workers.content.infofinder(a)}}},infoloader:function(a){return!1},infofinder:function(a){console.log(a);return{successfn:function(b,c,d,e){b=getstr(/<div\s*class="mangadir-glass-img">\s*<img\s*src="((?!").*?)"/,a.result);c=getstr(/class="mangadir-glass-name">((?!<).*?)<\/p>/,
a.result);d=getstr(/class="top-title-right">\s*\u66f4\u65b0:\s*([\-,\d]+)\s*<\/span>/,a.result);e=getstr(/data-author="((?!").*?)"/,a.result);var f=getstr(/class="description_intro">\s*((?!<).*?)\s*<\/span>/,a.result),g="";e.split("/").forEach(function(a){g+=gettag(a)});setlistpic({name:c,img:b,added:a.data,description:"<p>\u3010\u4f5c\u8005\u3011"+e+"<br>\u3010\u66f4\u65b0\u3011"+d+"<br>\u3010\u7b80\u4ecb\u3011"+f+"</p>",sourceurl:pluginfo(a.plugin).apihost+"m/"+a.pid,comment:1,preview:0,tags:gettag(c)+
g});return!0}}}},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"read/"+a.pid+"/"+a.cid,method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u56fe\u7247\u4fe1\u606f...",title:"\u56fe\u7247",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){console.log(a);return{reg:/data-original="((?!").*?)"/g,str:a.result,find:"$1",successfn:function(b,c,d,e){array_count(e)?(console.log(e),
a.download?chapterpredownload({source:e,download:a.download,plugin:a.plugin}):chapterviewer({source:e,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})):a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u56fe\u7247\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+
"topic/get_next_topic",method:"POST",data:"mid="+a.pid+"&start="+20*(parseInt(a.page||1)-1),timeout:120,header:{"content-type":"application/x-www-form-urlencoded"},successfn:function(b,c){b?a.callback&&a.callback({result:b,header:c,commentbrowser:{url:pluginfo(a.plugin).apihost+"topic/"+a.pid+"/",title:"\u8bc4\u8bba - "+pluginfo(a.plugin).name+'<br><span style="font-size:16px">'+(myContent.name||"")+"</span>",browser:!1,flag:""}}):a.callback&&a.callback()}}},finder:function(a){console.log(a);return{json:!0,
str:a.result,successfn:function(b,c,d,e){if(array_count(b)){b=b.datas;c=b.hasnext;b=b.ctt;for(var f in b)a.callback&&a.callback({page:a.page||1,pagecount:0<c?0:-1,comment:{text:b[f].text,name:b[f].name,avatar:b[f].head,type:"received",label:b[f].timeintext,day:"",time:"",reverse:1,extra:""}})}}}},send:!1},previewflag:{loader:!1,finder:!1,more:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"category/ajax_group",method:"POST",data:"fun=14&param=&gname=\u6700\u8fd1\u66f4\u65b0&count=16&start="+
16*(parseInt(a.page||1)-1),timeout:120,header:{"content-type":"application/x-www-form-urlencoded"},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=b.datas.items;console.log(JSON.stringify(b));b&&plugfns(a.plugin).pagedeal(b,a)}}}},hotflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"category/ajax_group",method:"POST",data:"fun=1&param=10018&gname=\u4eca\u65e5\u70ed\u699c&count=16&start="+
16*(parseInt(a.page||1)-1),timeout:120,header:{"content-type":"application/x-www-form-urlencoded"},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=b.datas.items;console.log(JSON.stringify(b));b&&plugfns(a.plugin).pagedeal(b,a)}}}}},fns:{pagedeal:function(a,b){b=b||{};a.forEach(function(a){var d=a.mid,e=a.logo,f=a.name;a=a.author;if(b.multupdate)return b.multupdate(obj_contact(b,{pid:d,img:e,title:f,content:a})),
!1;if(b.multhot)return b.multhot(obj_contact(b,{pid:d,img:e,title:f,content:a})),!1;if(b.multsearch)return b.multsearch(obj_contact(b,{pid:d,img:e,title:f,content:a})),!1;addcardlist({pid:d,title:f,img:e,stitle:a,comment:1})})}}});
