ExView.Plugins({info:{name:"\u6709\u5996\u6c14\u6f2b\u753b",version:"2.2",db:"u17",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAChklEQVQ4jXWSO29TQRBGz+5ex9evOLHjPDCvOAKFh4gCTSQoAIVHBP+ADtHyV2hoEDSUCBoKlAYoEEgIJIIoIAgUApIDIcGYGGP7+t7doXBiMBJTrUY735yZ+ZSICP+JpqtgaQOg0SR0AYXu+eNtPUKpYwkBhQI27DKP6zeohBX6lM9QHE6nr6Iw3WJDH2qL4H79MpWojsMhTgExHtbu0XAblOKH2efvQeNtyoOnYkynT3UInISEDu5+uYPguh06uJql4CVLtZc96Dv9A0ynZjsCLflBI2yTkyKRhFTDL4CgEEb9CUQEhwVAABFHKTbJgFfqCGhi7E5Ocmr7Nzaq25lfuY4AcZ2ilDrcwd4EU9owkR0nkwpIqGE8QVizr1gNFnlbbvBi/dpmJ6FBjcflW3+NpBCEdOI8x/JXSOsxvE/tBzxdv8mj98/5+uvj5oqglJ1mR//BbvHn+jveV5+h0Az5BZJ6uLPMtNnGz2aLr9+WAcWWKZaaCyytLvzjDMVgfJR43BBTyY5ATu9lJFMgp4qMD03xojyPQnNw9AQx42OUQSnNm7Un1IMKIwO7SJnCHyNpFWMwnefs8WmWFyNcE8CxWH7avTlAO2oiAoN+hoTKdfMaYMq/xKi/n/X179jA4kU+aSmQdHmSLo9vs0StCBtY0v0eY97MHwKArBnHWs3K6gckgKNHzjA7M4ezjjvzt6m3qlSqZVDQ6H9N3uzrJYikRe1nlR8ba0gIqayjaI5hDJTXPvBuZQEXQjEzyaHcOeK6v5egJVWsCpibuYBgGRlLkDFFJDLMnZylEdRQRjMwophKXuy9i4iIdW1atoYlAhWiMKTMMKFr0ZYafSYBgCGBp/wegd9u1gRAXyivIQAAAABJRU5ErkJggg==",
apihost:"http://m.u17.com/",pagetitle:["<br>","\u6536\u85cf","\u9996\u9875","\u7c7b\u578b","\u4e0b\u8f7d"],download:!0,lazyload:!0,theme:"green",setting:!0,webpage:{url:"http://m.u17.com/login?target=http://m.u17.com/member",title:"\u767b\u9646"},cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader();ExView.workers.type.loader()}})},flags:{indexflag:{loader:function(a){a.front||a.page||setnowlistname("\u9996\u9875",
"",pluginfo(a.plugin).icon);return{url:pluginfo(a.plugin).apihost+"waterfall/list?page="+(a.page||1)+"&pageSize=20",method:"GET",timeout:120,successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));a.successfn&&a.successfn({result:b,header:c})},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")},canclefn:function(){a.page||
setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon)},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u9996\u9875",title:a.title,img:a.img}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){console.log(JSON.stringify(b));array_count(b)?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',2)},errorfn:function(){a.page||setnowlistname("\u9996\u9875",
"",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="-1|\u9996\u9875|index";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},typeflag:{loader:function(a){addtypelist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6b63\u5728\u52a0\u8f7d\u7c7b\u578b...<div class="progress"></span></div>',
2);return{url:pluginfo(a.plugin).apihost+"search.html",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){addtypelist({title:"\u9996\u9875",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u9996\u9875"});addtypelist({tid:"",listflag:"update/list/1?page={{page}}&pageSize=20",title:"\u6700\u65b0\u66f4\u65b0",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u6700\u65b0\u66f4\u65b0"});
addtypelist({tid:"",listflag:"rank/list?page={{page}}&size=20",title:"\u6392\u884c",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u6392\u884c"});addtypelist({tid:"",listflag:"color/list?page={{page}}&size=20",title:"\u5f69\u6f2b",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u5f69\u6f2b"});return{reg:/<a\s*href="sort\/list\/(\d+).html"\s*class=\"classify-tag\">((?!<).*?)<\/a>/g,str:a.result,find:"$1{{separator}}$2",successfn:function(b){b=
b.split("{{separator}}");array_count(b)?addtypelist({tid:b[0],title:b[1],img:pluginfo(a.plugin).icon,group:{name:"fenlei",title:"\u5206\u7c7b"},content:b[1]}):addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',2)}}}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+(a.flag?a.flag.replace(/{{page}}/g,20*((parseInt(a.page)||
1)-1)):"sort/theme/"+a.keyword+"?page="+(a.page||1)+"&size=20"),method:"GET",timeout:120,successfn:function(b,c){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:c})),a.successfn&&a.successfn({result:b,header:c})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.title+"\u3011",title:a.title,
img:a.img}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="0|"+a.keyword+"|list";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},searchflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+
"search/comic/",method:"POST",data:"key="+encodeURIComponent(a.keyword)+"&page="+parseInt(a.page||1),timeout:120,header:{"content-type":"application/x-www-form-urlencoded"},successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.keyword+
"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,d){console.log(b);array_count(b)?(b.allPage&&(mySession.nowlistpages=b.allPage+"|"+a.keyword+"|search"),b=b.comics,b.length||(a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',
1)),b.forEach(function(b){plugfns(a.plugin).pagedeal(b,a)})):a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(b){mySession.nowlistpages="0|"+a.keyword+"|search";mySession.nowlistpage=1;console.log(mySession.nowlistpages)}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"chapter/list?comicId="+
a.pid,method:"GET",timeout:120,successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u76ee\u5f55...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,d,e){if(array_count(c)){if(a.checkupdate)return{pid:b.comicId,
cid:b.chapterId,title:b.name+(b.imageTotal?b.imageTotal+"P":"")};e=[];for(d=0;d<c.length;d++)e[d]=additemlist({id:c.length-d-1,newest:a.newest&&0==d,pid:c[d].comicId,cid:c[d].chapterId,title:(c[d].price?"\u3010VIP\u3011":"")+c[d].name+(c[d].imageTotal?"("+c[d].imageTotal+"P)":""),count:c.length,reverse:1});return e}a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},afterfn:function(){a.checkupdate||ExView.workers.content.infoloader(a)}}},
infoloader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/"+a.pid,method:"GET",timeout:120,successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u5185\u5bb9\u9875...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},infofinder:function(a){console.log(a);return{json:!0,
str:a.result,successfn:function(b,c,d,e){c=b.cover;d=b.name;e=getLocalTime(1E3*parseInt(b.lastUpdateTime));var f=b.authorName;setlistpic({name:d,img:c,added:a.data,description:"<p>\u3010\u4f5c\u8005\u3011"+f+"<br>\u3010\u66f4\u65b0\u3011"+e+"<br>\u3010\u7b80\u4ecb\u3011"+b.description+"</p>",comment:1,preview:0,tags:gettag(d)+gettag(f),sourceurl:pluginfo(a.plugin).apihost+"c/"+a.pid+".html"});return!0}}}},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"image/list?comicId="+a.pid+
"&chapterId="+a.cid,method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u56fe\u7247\u4fe1\u606f...",title:"\u56fe\u7247",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){console.log(a);return{json:!0,str:a.result,successfn:function(b,c,d,e){array_count(b)?(b=b.data.list,b=b.map(function(a){return a.location}),console.log(b),a.download?chapterpredownload({source:b,download:a.download,plugin:a.plugin}):
chapterviewer({source:b,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})):a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u56fe\u7247\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:function(a){myContent.threadId||$$.ajax({url:pluginfo(a.plugin).apihost+"comment/thread/"+a.pid,async:!1,
success:function(a){a=JSON.parse(a);myContent.threadId=a.threadId}});return{url:pluginfo(a.plugin).apihost+"comment/list?threadId="+myContent.threadId+"&page="+(a.page||1)+"&pageSize=20",method:"GET",timeout:120,successfn:function(b,c){b?a.callback&&a.callback({result:b,header:c,commentbrowser:{url:pluginfo(a.plugin).apihost+"c/"+a.pid+".html",title:"\u8bc4\u8bba - "+pluginfo(a.plugin).name+'<br><span style="font-size:16px">'+(myContent.name||"")+"</span>",browser:!1,flag:""}}):a.callback&&a.callback()}}},
finder:function(a){console.log(a);return{json:!0,str:a.result,successfn:function(b,c,d,e){array_count(b)?a.callback&&a.callback({page:a.page||1,pagecount:0,comment:{text:b.content,name:b.nickname,avatar:b.xxMember.face,type:"received",label:getLocalTime(1E3*parseInt(b.replyTime)),day:"",time:"",reverse:1,extra:""}}):a.callback&&a.callback({page:a.page||1,pagecount:-1})}}},send:!1},previewflag:{loader:!1,finder:!1,more:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+
"update/list/1?page="+20*(parseInt(a.page||1)-1)+"&pageSize=20",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){console.log(JSON.stringify(b));array_count(b)&&plugfns(a.plugin).pagedeal(b,a)}}}},hotflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"rank/list?page="+20*(parseInt(a.page||1)-1)+"&size=20",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,
header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){console.log(JSON.stringify(b));array_count(b)&&plugfns(a.plugin).pagedeal(b,a)}}}}},fns:{pagedeal:function(a,b){b=b||{};var c=a.comicId,d=a.comicCover||a.cover,e=a.comicName||a.name,f=a.brief||"\u66f4\u65b0\u81f3"+a.chapterNum+"\u8bdd",h=a.lastUpdateTime?getLocalTime(1E3*a.lastUpdateTime):"",k=a.description,g=a.isVip;if(b.multupdate)return b.multupdate(obj_contact(b,{pid:c,img:d,title:e,content:f})),!1;if(b.multhot)return b.multhot(obj_contact(b,
{pid:c,img:d,title:e,content:f})),!1;if(b.multsearch)return b.multsearch(obj_contact(b,{pid:c,img:d,title:e,content:f})),!1;addcardlist({pid:c,title:e,img:d,stitle:f+" "+h,content:(g?"\u3010VIP"+g+"\u3011":"")+(k||""),comment:1})}}});
