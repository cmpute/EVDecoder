ExView.Plugins({info:{name:"\u7ec5\u58eb\u6f2b\u753b",version:"2.2",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABTElEQVQ4jcXTsUuVURgG8N93/YiQiGi4SaP/gBAR0uSQDlcUKaOM8g9obzEa00UXwaUIhBLhgtTm4tTgKK41O9xA5GZw0evtfg3n9XaRvsmhdzrnvOd5zvM+73uyoihcJiqXQiOvvPsJNzCBK2hgJ/LTeI9B5NjDExz0CPwu4CE+xFkTI7iHjSA9j/vYDpIGjrPK6tFHPL+grB0vlpXYifynbGDl8FccrKOFYTztu7yPr7iOGqp9uWau3c3xHUtBcBez8cJrLIZHLVzFFh70PMjOuie4gx8XZH4J8Bpe4gSPMYdvuJkITrslZdrAaICnMC4ZfStKmkkE7dJBynHOfk1qZSf2PXPz7KxUwQtMYhmbOMYjDGHsL0G7lKCGt3iFN5IHVXyWOhIyyxXAgtTS3QCN9YOTgk5Rx7w0PP+K23gW61aUQprQevbff+Mf0PRSnPpQ2roAAAAASUVORK5CYII=",
db:"wnacg",apihost:"http://www.wnacg.net/",pagetitle:["<br>","\u6536\u85cf","\u9996\u9875","\u7c7b\u578b","\u4e0b\u8f7d"],lazyload:!0,download:!0,nativeres:!0,setting:!0,typelistmode:!0,cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader()}})},flags:{indexflag:{loader:function(a){a.front||a.page||addtypelist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u7c7b\u578b<br>\u6b63\u5728\u52a0\u8f7d...<div class="progress"></span></div>',
2);return{url:pluginfo(a.plugin).apihost+(1<parseInt(a.page)?"albums-index-page-"+a.page+".html":"albums.html"),method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));a.front||a.page||ExView.workers.type.finder({result:b,plugin:a.plugin});a.successfn&&a.successfn({result:b,header:c})},errorfn:function(){a.front||a.page||addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',
2);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")},canclefn:function(){a.front||a.page||addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',2)},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u9996\u9875",title:a.title,
img:a.img}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:getresult(a.result),find:plugfns(a.plugin).pagefind,successfn:function(b){b?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',2)},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")}}},countloader:function(a){return!1},
countfinder:function(a){return{reg:plugfns(a.plugin).pagecountrule,str:a.result,find:plugfns(a.plugin).pagecountfind,successfn:function(a){console.log(a);mySession.nowlistpages=(a||"-1")+"|\u9996\u9875|index";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},typeflag:{loader:function(a){return{successfn:function(){ExView.workers.index.loader()}}},finder:function(a){addtypelist({title:"\u9996\u9875",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u9996\u9875"});
[{tid:5,title:"\u540c\u4eba\u5fd7\u5168\u90e8",group:{name:"tongrenzhi",title:"\u540c\u4eba\u5fd7"}},{tid:1,title:"\u540c\u4eba\u5fd7\u6f22\u5316",group:{name:"tongrenzhi",title:"\u540c\u4eba\u5fd7"}},{tid:12,title:"\u540c\u4eba\u5fd7\u65e5\u8a9e",group:{name:"tongrenzhi",title:"\u540c\u4eba\u5fd7"}},{tid:2,title:"CG\u756b\u96c6",group:{name:"tongrenzhi",title:"\u540c\u4eba\u5fd7"}},{tid:3,title:"Cosplay",group:{name:"tongrenzhi",title:"\u540c\u4eba\u5fd7"}},{tid:6,title:"\u55ae\u884c\u672c\u5168\u90e8",
group:{name:"danhangben",title:"\u55ae\u884c\u672c"}},{tid:9,title:"\u55ae\u884c\u672c\u6f22\u5316",group:{name:"danhangben",title:"\u55ae\u884c\u672c"}},{tid:13,title:"\u55ae\u884c\u672c\u65e5\u8a9e",group:{name:"danhangben",title:"\u55ae\u884c\u672c"}},{tid:7,title:"\u96dc\u8a8c\u5168\u90e8",group:{name:"zazhi",title:"\u96dc\u8a8c"}},{tid:10,title:"\u96dc\u8a8c\u55ae\u7bc7\u6f22\u5316",group:{name:"zazhi",title:"\u96dc\u8a8c"}},{tid:14,title:"\u96dc\u8a8c\u65e5\u8a9e",group:{name:"zazhi",title:"\u96dc\u8a8c"}}].forEach(function(b){addtypelist(obj_contact(b,
{img:pluginfo(a.plugin).icon}))});return!1}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"albums-index-"+(1<parseInt(a.page)?"page-"+a.page+"-":"")+"cate-"+a.keyword+".html",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},successfn:function(b,c){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:c})),a.successfn&&a.successfn({result:b,header:c})):(ExView.fw.hidePreloader(),mySession.isloading=
0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.title+"\u3011",title:a.title,img:a.img}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:getresult(a.result),find:plugfns(a.plugin).pagefind,successfn:function(b){b?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',
1)}}},countloader:function(a){return!1},countfinder:function(a){return{reg:plugfns(a.plugin).pagecountrule,str:a.result,find:plugfns(a.plugin).pagecountfind,successfn:function(b){console.log(b);mySession.nowlistpages=(b||"-1")+"|"+a.keyword+"|list";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},searchflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"albums-index-page-"+(a.page||1)+"-sname-"+a.keyword+".html",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,
header:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.keyword+"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+
(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:getresult(a.result),find:plugfns(a.plugin).pagefind,successfn:function(b,c,d){console.log(b);b?plugfns(a.plugin).pagedeal(b,a):a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{reg:plugfns(a.plugin).pagecountrule,
str:a.result,find:plugfns(a.plugin).pagecountfind,successfn:function(b){console.log(b);mySession.nowlistpages=(b||"-1")+"|"+a.keyword+"|search";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"photos-index-aid-"+a.pid+".html",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},successfn:function(b,c){b?a.successfn&&a.successfn({result:b,
header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u5185\u5bb9\u9875...",title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{reg:plugfns(a.plugin).pagecountrule,str:a.result,find:plugfns(a.plugin).pagecountfind,successfn:function(b){b=b||1;console.log(typeof b);if(b){if(a.checkupdate)return{pid:a.pid,cid:b,
title:"\u7b2c"+b+"\u8bdd"};for(var c=[],d=0;d<parseInt(b);d++)c[d]=additemlist({id:d,newest:a.newest&&0==d,pid:a.pid,cid:d+1,title:"\u7b2c"+(d+1)+"\u8bdd",count:parseInt(b),reverse:0});return c}a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},afterfn:function(){a.checkupdate||ExView.workers.content.infofinder(a)}}},infoloader:function(a){return!1},infofinder:function(a){console.log(a);return{reg:/class="userwrap">(.*?)<div\s*id="bodywrap"/g,
str:getresult(a.result),find:"$1",successfn:function(b,c,d,e){console.log(JSON.stringify(b));c=getstr(/data-original="((?!\").*?)"/,b);d=getstr(/<h2>((?!<).*?)<\/h2>/,b);e=getstr(/lazy"><p>((?!<).*?)<\/p>/,b);var f=getstr(/<label>\u5206\u985e\uff1a((?!<).*?)<\/label>/,b).trim();b=getstr(/<p>\u7c21\u4ecb\uff1a(.*?)<\/p>/,b).trim();setlistpic({name:d,img:c,added:a.data,description:"<p>\u3010\u7c7b\u578b\u3011"+f+"<br>\u3010\u4f5c\u8005\u3011"+e+(b?"<br>\u3010\u7b80\u4ecb\u3011"+gettext(b):"")+"</p>",
comment:0,preview:1,tags:gettag(d)+gettag(f)+gettag(e)});return!0}}}},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"photos-index-page-"+a.cid+"-aid-"+a.pid+".html",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u56fe\u7247\u4fe1\u606f...",title:"\u56fe\u7247",name:getlistname(a.pid),
img:getlistimg(a.pid)}}},finder:function(a){console.log(a);return{query:!0,str:a.result,selector:".pic_box",successfn:function(b,c,d,e){if(array_count(c)){b=[];for(d=0;d<c.length;d++)e=$$(c[d]).find("a").attr("href"),e=getstr(/\/photos-view-id-(\d+).html/,e),b.push(getpageload(pluginfo(a.plugin).apihost+"photos-view-id-"+e+".html",a.plugin||mySession.nowplugin,{cacheheader:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},nativeres:pluginfo(a.plugin).nativeres}));console.log(b);a.download?
chapterpredownload({source:b,download:a.download,plugin:a.plugin}):chapterviewer({source:b,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})}else a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u56fe\u7247\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:!1,finder:!1},previewflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+
"photos-index"+(1<parseInt(a.page)?"-page-"+a.page:"")+"-aid-"+a.pid+".html",method:"GET",data:"",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.modules.previewpage.error(a),ExView.fw.alert("\u9884\u89c8\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u83b7\u53d6\u9884\u89c8\u4fe1\u606f...",
title:"\u9884\u89c8\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){console.log(a);return{query:!0,str:a.result,selector:".pic_box",successfn:function(b,c,d,e){c=$$(b).find("img").attr("src");c=pluginfo(a.plugin).apihost+(0==c.indexOf("/")?c.substring(1):c);b=$$(b).find("a").attr("href");b=getstr(/photos-view-id-(\d+).html/,b);addpreviewlist({page:a.page||1,pagecount:myContent.items.length,preview:{imgurl:c,pageurl:pluginfo(a.plugin).apihost+"photos-view-id-"+b+".html"}})}}}},
pageimgflag:{parser:function(a){return{reg:/class="posselect"><img src="((?!").*?)"/g,str:getresult(a.result),find:"$1",successfn:function(b){b=0==b.indexOf("/")?pluginfo(a.plugin).apihost+b.substring(1):b;b=getimgload(b,a.plugin,{cacheheader:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},nativeres:pluginfo(a.plugin).nativeres});console.log("xxx:"+b);a.loadimgurl(b)}}}},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+(1<parseInt(a.page)?"albums-index-page-"+a.page+
".html":""),method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:getresult(a.result),find:plugfns(a.plugin).pagefind,successfn:function(b){console.log(JSON.stringify(b));b&&plugfns(a.plugin).pagedeal(b,a)}}}},hotflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"albums-index-"+
(1<parseInt(a.page)?"page-"+a.page+"-":"")+"cate-3.html",method:"GET",timeout:120,nativerequest:pluginfo(a.plugin).nativeres,header:{"User-Agent":"ExView",Referer:pluginfo(a.plugin).apihost},successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:getresult(a.result),find:plugfns(a.plugin).pagefind,successfn:function(b){console.log(JSON.stringify(b));b&&plugfns(a.plugin).pagedeal(b,a)}}}}},fns:{pagecountrule:/>(\d+)<\/a>\s*<span\s*class="next"/g,
pagecountfind:"$1",pagerule:/<li class="li\s*gallary_item">(.*?)<div\s*class="pic_ctl">/g,pagefind:"$1",pagedeal:function(a,b){b=b||{};var c=getstr(/photos-index-aid-(\d+).html"/,a),d=getstr(/alt="((?!\").*?)"/,a),e=d+"\u3010"+getstr(/(\d+)\u5f35\u7167\u7247/,a)+"P\u3011",f=getstr(/src="((?!\").*?)"/,a),h=getstr(/\u5275\u5efa\u65bc([\d,\-]+)/,a),g="\u3010"+getstr(/(\d+)\u5f35\u7167\u7247/,a)+"P\u3011",f=0==f.indexOf("/")?pluginfo(b.plugin).apihost+f.substring(1):f;if(b.multupdate)return b.multupdate(obj_contact(b,
{pid:c,img:f,title:d,content:g})),!1;if(b.multhot)return b.multhot(obj_contact(b,{pid:c,img:f,title:d,content:g})),!1;if(b.multsearch)return b.multsearch(obj_contact(b,{pid:c,img:f,title:d,content:g})),!1;addcardlist({pid:c,title:d,name:e,img:f,content:"",stitle:h,comment:0,preview:1,extrabutton:""})}}});
