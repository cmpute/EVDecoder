ExView.Plugins({info:{name:"\u5fae\u6f2b\u753b",version:"2.2",author:"Gentle",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABSlBMVEUAAADjThvmUx/gSRbDPg7iTxypKQDZSRfpUh7aTBnIPg/SQhGuLgLIQRDvWCKyNAfOQxO4OArwWiSpKQDORRTuURysMATqUx/SRxXiShepKgC+OwyzNAe3NAeuMgXjUR28OAqtMAPTSBa0NQivMgXqViGvMwa7Ogu2Nwn/45X/2Y3/1Ir/zIP/yoLcVyPQRxXMQRHXQRC4NQizMQT/7p7/6pr/5Zf+35T/25D/0Yj/zob/x4H/w37+v3r4s2/zl1brj1HhgkXXeD/QYCvqXSfTWiXgUR7fThvZSxjUSBayMwe7LwL70of4zIL/xX7/w333wnr1vHb7tnP2q2rvrmnrqGXzomPqomH2nV7pjlHpi03fi03qhEfxfkLXekHadj7ndjzocznbZS3gZC3LYCzIXyvJUyDqVB/WUx/ERxbCPQ66PA22Ow3ENAcfh2H6AAAAKXRSTlMAwxH73M+8qEga+e7l4N/Avbq2tLOwpaOjk46Jfnp2aGJXS0Q2MhQNB7QEA1QAAADFSURBVBjTY8AOOET5hJgQXCbxWHuXdFU4n5PVRdfEnllekpGRAyzP6u4WYZvI7OYQ484IEmD3MPTQ0zM0TNDUTGYH8pU8PaMCfHxDkvSC7DK4JTgZRAwiLbQsNE1MHfX1DVz1BRh4Dex0dCy1tczMXHMdzUO5GFiywqz9dK20tUyjvR3MA1kYpI2cbW38rXUsNZ28M+PTFBjUBY2dg22ASsKzjYyMZYHWaMjw5KQ4xaV6GXvxK0OcqqYoJczGJianwkAUAABg1CGtEFC04QAAAABJRU5ErkJggg==",
db:"weibomh",apihost:"http://manhua.weibo.cn/",pagetitle:["<br>","\u6536\u85cf","\u9996\u9875","\u7c7b\u578b","\u4e0b\u8f7d"],download:!0,lazyload:!0,setting:!0,cdn:""},set:function(a){},unset:function(a){},init:function(a){ExView.workers.fav.listloader({callback:function(){}})},flags:{indexflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/home/ajax_index_recommend",method:"POST",data:"page="+(a.page||1),timeout:120,postform:!0,referer:pluginfo(a.plugin).apihost,successfn:function(b,
c){a.callback({img:pluginfo(a.plugin).icon,multpage:!0,result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=((b||{}).data||{}).data;array_count(b)?b.forEach(function(b){a.callback({pid:getstr(/c\/(\d+)/g,b.link_url),title:b.title,img:b.image_url,stitle:"\u66f4\u65b0\u81f3 "+b.chapter_num+"\u8bdd",comment:1})}):a.callback()}}},countloader:!1,countfinder:function(a){return{json:!0,str:a.result,successfn:function(b){try{var c=Math.ceil(b.data.total_num/10)}catch(d){c=
-1}a.callback({pagecount:c||-1})}}}},typeflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost,method:"GET",timeout:120,successfn:function(b,c){a.callback({result:b,header:c})}}},finder:function(a){a.callback({title:"\u9996\u9875",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u9996\u9875"});a.callback({tid:"",listflag:"new",title:"\u66f4\u65b0",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u66f4\u65b0"});a.callback({tid:"",
listflag:"top",title:"\u6392\u884c",img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u6392\u884c"});return{reg:/\/i\/category\/(\d+)">((?!<).*?)</g,str:a.result,find:"$1{{separator}}$2",successfn:function(b){b=b.split("{{separator}}");array_count(b)&&a.callback({tid:b[0],title:b[1],img:pluginfo(a.plugin).icon,group:{name:"fenlei",title:"\u5206\u7c7b"},content:b[1]})}}}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+(a.flag?"top"==a.flag?"comic/home/ajax_rank_list?rank_type=read":
"comic/home/ajax_recent_update?page="+(a.page||1):"comic/home/ajax_category?page="+(a.page||1)+"&cate_id="+a.tid),method:"GET",timeout:120,successfn:function(b,c){a.callback({multpage:!0,result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.title+"\u3011",title:a.title,img:a.img}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=b.data;array_count(b)?plugfns(a.plugin).pagedeal(b,a):a.callback()}}},countloader:!1,
countfinder:function(a){return{json:!0,str:a.result,successfn:function(b){try{var c=Math.ceil(b.total_num/10)}catch(d){c=-1}a.callback({pagecount:c||-1})}}}},searchflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/home/ajax_search",method:"POST",data:"kw="+encodeURIComponent(a.keyword)+"&page="+(a.page||1),timeout:120,postform:!0,referer:pluginfo(a.plugin).apihost,successfn:function(b,c){a.callback({multpage:!0,result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,
successfn:function(b){b=b.data;array_count(b)?plugfns(a.plugin).pagedeal(b,a):a.callback()}}},countloader:!1,countfinder:function(a){return{json:!0,str:a.result,successfn:function(b){try{var c=Math.ceil(json.total_num/10)}catch(d){c=-1}a.callback({pagecount:c||-1})}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"c/"+a.pid,method:"GET",timeout:120,successfn:function(b,c){a.callback({result:b,header:c})}}},finder:function(a){return{reg:/\/p\/(\d+)" class="V_CLR_G6"><div class="dir_c T_ellipsis">((?!<).*?)<\/div>/g,
str:a.result,find:{pid:a.pid,cid:"$1",title:"$2"},successfn:function(b,c,d,f){if(array_count(b)){if(a.checkupdate)return b=f.pop(),a.callback({pid:b.pid,cid:b.cid,title:b.title}),!0;a.callback({id:d,newest:a.newest&&0==d,pid:b.pid,cid:b.cid,title:b.title,count:c.length,reverse:0})}else a.callback()}}},infoloader:!1,infofinder:!1},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"p/"+a.cid,method:"GET",timeout:120,successfn:function(b,c){a.callback({result:b,header:c})}}},finder:function(a){return{json:!0,
str:getstr(/var\s*json_content\s*=\s*(.*?);\r*\n/g,a.result),successfn:function(b,c,d,f){array_count(b)?(b=b.page,b=b.map(function(a){return a.mobileImgUrl}),a.download?a.callback({source:b,download:a.download,plugin:a.plugin}):a.callback({source:b,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})):a.callback();return!0}}}},commentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/comment/get_comic_comment?comic_id="+a.pid+"&page="+
(a.page||1),method:"GET",timeout:120,successfn:function(b,c){b?a.callback({result:b,header:c,commentbrowser:{url:pluginfo(a.plugin).apihost+"c/"+a.pid,title:"\u8bc4\u8bba - "+pluginfo(a.plugin).name+'<br><span style="font-size:16px">'+(myContent.name||"")+"</span>",browser:!1,flag:""}}):a.callback()}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b,c,d,f){if(array_count(b)){c=Math.ceil(b.data.total_num/20);b=b.data.data;for(var e in b)a.callback({page:a.page||1,pagecount:c,comment:{text:b[e].content,
name:b[e].user_info.sina_nickname,avatar:b[e].user_info.avatar,type:"received",label:b[e].create_time,day:"",time:"",reverse:1,extra:""}})}}}},send:!1},previewflag:{loader:!1,finder:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comic/home/ajax_recent_update?page="+(a.page||1),method:"GET",timeout:120,successfn:function(b,c){a.callback({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=b.data;array_count(b)?
plugfns(a.plugin).pagedeal(b,a):a.callback()}}}},hotflag:{loader:function(a){return 1<parseInt(a.page||1)?(a.callback(),!1):{url:pluginfo(a.plugin).apihost+"comic/home/ajax_rank_list?rank_type=read",method:"GET",timeout:120,successfn:function(b,c){a.callback({result:b,header:c})}}},finder:function(a){return{json:!0,str:a.result,successfn:function(b){b=b.data;array_count(b)?plugfns(a.plugin).pagedeal(b,a):a.callback()}}}}},fns:{pagedeal:function(a,b){b=b||{};a.forEach(function(a){var d=a.comic_id,
f=a.cover,e=a.name,k=gettext(a.artists),h=a.description,g=a.update_time?getLocalTime(1E3*a.update_time):"";a=g?"\u66f4\u65b0\u65e5\u671f "+g:a.watching_focus;if(b.multupdate||b.multhot||b.multsearch)return b.callback(obj_contact(b,{pid:d,img:f,title:e,content:a})),!1;b.callback({pid:d,title:e,img:f,stitle:k,content:(g?"\u3010\u66f4\u65b0\u3011"+g+"<br>":"")+(h?"\u3010\u7b80\u4ecb\u3011"+h+"<br>":""),comment:1})})}}});
