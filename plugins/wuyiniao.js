ExView.Plugins({info:{name:"\u65e0\u7ffc\u9e1f\u6f2b\u753b",version:"2.2",db:"wuyiniao",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAA2FBMVEUAAAACAwMAAAAAAAAAAAAAAABDTkcvODIAAAAaHxwAAAAAAAAAAAD///8AAAD5+v/Cx+Tl6f3y9P7q7f7Dy/paXn7i5v24v+T29/7b4PzP1fv29vmwuvbt7fOyueOstOPAwti7vNKlqs2orMV9g65la4xeYG7u8f7e4/3W3PzL0vueqvff4e+8weWyu+HGyOCyt9yrsducpNq1utWpr9SVnNF7hciRlsSKkMOfprmXmbmCh7ianrWLj7KTl612hKhydqRrbn5UV3VQU19DRU82Nz8tMD4YHBkoOqvEAAAADXRSTlMA58eXt9fLj1jnp4d4zmHGjQAAALJJREFUGNNFz1UOwzAQRVEHyp3Y4XKwKTMzt/vfUSexotw/H+lZGkIUrEiylK3N2EeoZmBrlPZX75yUAqMAULOClyhzcBAwzTpHcgGh+DVU4KQebiiSudnVgadOSzjpzDwdUokqCHzR8NoAlCk4MdQewKi1v7cTIGVzMdeMVsNaHjmQnHlqBr4OTReoHYPYrdfcSfKxHookkfXAGFKA8VUgSbLwuIQO859CPj1RUrBf/PwD0MARxEnQkL8AAAAASUVORK5CYII=",
apihost:"http://m.hooxx.net/",pagetitle:["<br>","\u6536\u85cf","\u9996\u9875","\u7c7b\u578b","\u4e0b\u8f7d"],lazyload:!0,download:!0,setting:!0,theme:"orange",cdn:""},set:function(a){},unset:function(a){},init:function(){ExView.workers.fav.listloader({callback:function(){ExView.workers.index.loader();ExView.workers.type.loader()}})},flags:{indexflag:{loader:function(a){a.front||a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);return{url:pluginfo(a.plugin).apihost+"dfcomiclist_"+(a.page||
1)+".htm",method:"GET",timeout:120,successfn:function(b,c){ExView.workers.index.countfinder(obj_contact(a,{result:b,header:c}));a.successfn&&a.successfn({result:b,header:c})},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")},canclefn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon)},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<
a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u9996\u9875",title:a.title,img:a.img}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b){console.log(JSON.stringify(b));b?plugfns(a.plugin).pagedeal(b,a):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',2)},errorfn:function(){a.page||setnowlistname("\u9996\u9875","",pluginfo(a.plugin).icon);ExView.fw.hidePreloader();
mySession.isloading=0;ExView.fw.alert("\u7f51\u7edc\u9519\u8bef\uff01","ExView")}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="0|\u9996\u9875|index";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},typeflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"comicsearch/",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){addtypelist({title:"\u9996\u9875",
img:pluginfo(a.plugin).icon,group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u9996\u9875"});return{reg:/lists\/(\d+)"\s*title="((?!\").*?)"/g,str:a.result,find:"$1{{separator}}$2",successfn:function(b,c,f,e){if(array_count(e))return e.forEach(function(b){b=b.split("{{separator}}");addtypelist({tid:"lists/"+b[0],title:b[1],img:pluginfo(a.plugin).icon,group:{name:"fenlei",title:"\u5206\u7c7b"},content:b[1]})}),!0;addtypelist('<div align="center" class="list-block"><a href="javascript:void(0);" onclick="ExView.workers.type.loader();"><img src="img/logo.png"/><br>\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5\uff01</a></div>',
2)},beforefn:function(){addtypelist({tid:"a",title:"\u4eca\u65e5\u6700\u70ed",img:pluginfo(a.plugin).icon,listflag:"top",group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u4eca\u65e5\u6700\u70ed"});addtypelist({tid:"b",title:"\u6700\u591a\u4eba\u770b",img:pluginfo(a.plugin).icon,listflag:"top",group:{name:"daohang",title:"\u5bfc\u822a"},content:"\u6700\u591a\u4eba\u770b"});addtypelist({tid:"c",title:"\u6700\u53d7\u597d\u8bc4",img:pluginfo(a.plugin).icon,listflag:"top",group:{name:"daohang",title:"\u5bfc\u822a"},
content:"\u6700\u53d7\u597d\u8bc4"})},afterfn:function(){var b=["io9","io10"],c=["io11","io12","io13","io18"];ExView.modules.rulefind({reg:/href='\/lianwan\/(\d+)' class='nav_item_\w[-\w.+]*' title='((?!\').*?)'/g,str:a.result,find:"$1{{separator}}$2",successfn:function(c,e,d){c&&(c=c.split("{{separator}}"),addtypelist({tid:"lianwan/"+c[0],title:c[1],img:pluginfo(a.plugin).apihost+"css/image/"+b[d]+".png",listflag:"lianwan",group:{name:"biaoqian",title:"\u6807\u7b7e"},content:c[1]}))}});ExView.modules.rulefind({reg:/href='\/(duzhequn|lists)\/(\d+)(\/|)' class='nav_item_\w[-\w.+]*' title='((?!\').*?)'/g,
str:a.result,find:"$1{{separator}}$2{{separator}}$3{{separator}}$4",successfn:function(b,e,d){b&&(b=b.split("{{separator}}"),addtypelist({tid:b[0]+"/"+b[1],title:b[3],img:pluginfo(a.plugin).apihost+"css/image/"+c[d]+".png",listflag:"duzhequn",group:{name:"duzhequn",title:"\u8bfb\u8005\u7fa4"},content:b[3]}))}})}}}},listflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+("top"==a.flag?"top/"+a.keyword+"-"+(a.page||1)+".htm":a.keyword+"/"+(a.page||1)+"/"),method:"GET",timeout:120,successfn:function(b,
c){b?(ExView.workers.list.countfinder(obj_contact(a,{result:b,header:c})),a.successfn&&a.successfn({result:b,header:c})):(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.title+"\u3011<br>\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.title+"\u3011",title:a.title,img:a.img}}},finder:function(a){return{reg:"top"!=a.flag?plugfns(a.plugin).pagerule:/<li\s*class='clearfix section1'>(.*?)<\/a>/g,
str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b){b?plugfns(a.plugin).pagedeal(b):addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},countfinder:function(a){return{successfn:function(){mySession.nowlistpages="0|"+a.keyword+"|list";mySession.nowlistpage=1;console.log(mySession.nowlistpages);return!0}}}},searchflag:{loader:function(a){return 1<parseInt(a.page)?(a.multsearch&&a.multsearch(),
!1):{url:pluginfo(a.plugin).apihost+"comicsearch/s.aspx?s="+encodeURIComponent(a.keyword),method:"GET",timeout:120,successfn:function(b,c){b?(a.multsearch||(ExView.workers.search.countfinder(obj_contact(a,{result:b,header:c})),setnowlistname("\u641c\u7d22\u3010"+a.keyword+"\u3011")),a.successfn&&a.successfn({result:b,header:c})):a.multsearch?a.multsearch():(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u3010"+a.keyword+"\u3011<br>\u83b7\u53d6\u641c\u7d22\u7ed3\u679c\u5931\u8d25\uff01",
"ExView"))},showinfo:{text:"\u6b63\u5728\u641c\u7d22..."+(1<a.page?"<br>\u7b2c"+a.page+"\u9875":""),name:"\u3010"+a.keyword+"\u3011",title:"\u641c\u7d22"}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b,c,f){console.log(b);b?plugfns(a.plugin).pagedeal(b,a):a.multsearch?a.multsearch():addcardlist('<div align="center" class="list-block"><img src="img/logo.png"/><br>\u6ca1\u6709\u5185\u5bb9</div>',1)}}},countloader:function(a){return!1},
countfinder:function(a){return{successfn:function(b){mySession.nowlistpages="-1|"+a.keyword+"|search";mySession.nowlistpage=1;console.log(mySession.nowlistpages)}}}},contentflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"mh/"+a.pid+"/",method:"GET",timeout:120,successfn:function(b,c){b?a.successfn&&a.successfn({result:b,header:c}):a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u5185\u5bb9\u9875...",
title:"\u5185\u5bb9\u9875",name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{reg:/vols\/([\_\d]+)\/'>((?!<).*?)<\/a>/g,str:a.result,find:{pid:a.pid,cid:"$1",title:"$2"},successfn:function(b,c,f,e){console.log(typeof b);if(array_count(b)){if(a.checkupdate)return{pid:b.pid,cid:b.cid,title:b.title};additemlist({id:c.length-f-1,newest:a.newest&&0==f,pid:b.pid,cid:b.cid,title:b.title,count:c.length,reverse:1})}else a.checkupdate||(ExView.fw.hidePreloader(),mySession.isloading=
0,ExView.fw.alert("\u5185\u5bb9\u9875\u83b7\u53d6\u5931\u8d25\uff01","ExView"))},afterfn:function(){a.checkupdate||ExView.workers.content.infofinder(a)}}},infoloader:function(a){return!1},infofinder:function(a){console.log(a);return{reg:/<div\s*class="pic">((?:.|[\r\n])*?)<\/div>/g,str:a.result,find:"$1",successfn:function(b,c,f,e){b=b.split("{{separator}}");console.log(JSON.stringify(b));try{var d=getstr(/<img\s*src='((?!\').*?)'/,b[0]),m=getstr(/<h3>((?!<).*?)<\/h3>/,b[0]),n=getstr(/<p>\u72b6\u6001\uff1a((?!<).*?)(\d+)?<\/p>/,
b[0]),k=getstr(/<p>\u66f4\u65b0\u65e5\u671f\uff1a((?!<).*?)<\/p>/,b[0]),l=getstr(/<p>\u4f5c\u8005\uff1a((?!<).*?)<\/p>/,b[0]),g=getstr(/'>((?!<).*?)<\/a><\/p>/,b[0]),p=getstr(/<p>\u4eba\u6c14\uff1a(\d+)<\/li><\/p>/,b[0]),h=getstr(/<div\s*class="ilist">((?:.|[\r\n])*?)<\/div>/,a.result);h&&(h=h.replace("<h3>\u6f2b\u753b\u4ecb\u7ecd\uff1a</h3>","").replace(/<p>/g,"").replace(/<\/p>/g,""));var q=gettag(n)+gettag(g)+gettag(l)}catch(r){}setlistpic({name:m,img:d,added:a.data,description:"<p>\u3010\u4f5c\u8005\u3011"+
l+"<br>\u3010\u7c7b\u578b\u3011"+g+"<br>\u3010"+n+"\u3011"+k+"<br>\u3010\u4eba\u6c14\u3011"+p+"<br>\u3010\u7b80\u4ecb\u3011"+h+"</p>",sourceurl:pluginfo(a.plugin).apihost+"mh/"+a.pid+"/",comment:1,preview:0,tags:gettag(m)+q+gettag(l)});return!0}}}},parseflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"vols/"+a.cid+"/",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})},showinfo:{text:"\u6b63\u5728\u52a0\u8f7d\u56fe\u7247\u4fe1\u606f...",title:"\u56fe\u7247",
name:getlistname(a.pid),img:getlistimg(a.pid)}}},finder:function(a){return{reg:/var\s*sFiles="(\w[-\w.+]*)";var\s*sPath="(\d+)";/g,str:a.result,find:"$1{{separator}}$2",successfn:function(b){if(b){b=b.split("{{separator}}");try{var c=b[0],f=c.substring(c.length-1),e="abcdefghijklmnopqrstuvwxyz".indexOf(f)+1,d=c.substring(c.length-e-12,c.length-e-1),c=c.substring(0,c.length-e-12),m=d.substring(0,d.length-1),n=d.substring(d.length-1);for(i=0;i<m.length;i++)c=c.replace(new RegExp(m.substring(i,i+1),
"gi"),i);var k=c.split(n),c="";for(i=0;i<k.length;i++)c+=String.fromCharCode(k[i]);var l=c.split("|"),g,p=b[1];arrDS="http://28.cao.website/dm01/ http://163.cao.website/dm14/ http://image.mlonet.com/ http://28.cao.website/dm04/ http://28.cao.website/dm05/ http://28.cao.website/dm06/ http://28.cao.website/dm07/ http://28.cao.website/dm08/ http://28.cao.website/dm09/ http://28.cao.website/dm10/ http://28.cao.website/dm11/ http://28.cao.website/dm12/ http://28.cao.website/dm13/ http://28.cao.website/dm14/ http://image.mlonet.com/ http://image.mlonet.com/".split(" ");
b="";for(i=0;i<arrDS.length;i++)if(p==i+1){b=arrDS[i];break}g=b;var h=[];for(i=0;i<l.length;i++)h.push(g+l[i]);console.log(h)}catch(q){console.log(q)}console.log(h);a.download?chapterpredownload({source:h,download:a.download,plugin:a.plugin}):chapterviewer({source:h,type:"image",startindex:a.startindex||0,lazyload:pluginfo(a.plugin).lazyload,zoom:!0,title:a.title})}else a.download?chapterpredownload({error:"\u89e3\u6790\u9519\u8bef\uff01",download:a.download,plugin:a.plugin}):(ExView.fw.hidePreloader(),
mySession.isloading=0,ExView.fw.alert("\u56fe\u7247\u4fe1\u606f\u83b7\u53d6\u5931\u8d25\uff01","ExView"));return!0}}}},commentflag:{loader:function(a){return{url:1==parseInt(a.page||1)?"http://changyan.sohu.com/api/2/topic/load?client_id=cyqVh5aXL&topic_url="+encodeURIComponent(pluginfo(a.plugin).apihost+"mh/"+a.pid+"/")+"&page_size=30&hot_size=0&topic_source_id="+a.pid.substring(2):"http://changyan.sohu.com/api/2/topic/comments?client_id=cyqVh5aXL&page_size=30&topic_id="+a.sid+"&page_no="+(a.page+
1),method:"GET",timeout:120,successfn:function(b,c){if(b){var f={};1==parseInt(a.page||1)&&(f=JSON.parse(b));a.callback&&a.callback({result:b,header:c,sid:f.topic_id||a.sid,commentbrowser:{url:pluginfo(a.plugin).apihost+"mh/"+a.pid+"/",title:"\u8bc4\u8bba - "+pluginfo(a.plugin).name+'<br><span style="font-size:16px">'+(myContent.name||"")+"</span>",browser:!1,flag:""}})}else a.callback&&a.callback()}}},finder:function(a){console.log(a);return{json:!0,str:a.result,successfn:function(b,c,f,e){if(array_count(b)){c=
b.comments;b=b.total_page_no;for(var d in c)a.callback&&a.callback({page:a.page||1,pagecount:b,comment:{text:c[d].content,name:c[d].passport.nickname,avatar:c[d].passport.img_url,type:"received",label:(new Date(parseInt(c[d].create_time))).toLocaleString().replace(/:\d{1,2}$/," "),day:"",time:"",reverse:1,extra:""}})}}}},send:!1},previewflag:{loader:!1,finder:!1,more:!1},pageimgflag:{parser:!1},updateflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"dfcomiclist_"+(a.page||1)+".htm",
method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{reg:plugfns(a.plugin).pagerule,str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b){console.log(JSON.stringify(b));b&&plugfns(a.plugin).pagedeal(b,a)}}}},hotflag:{loader:function(a){return{url:pluginfo(a.plugin).apihost+"top/a-"+(a.page||1)+".htm",method:"GET",timeout:120,successfn:function(b,c){a.successfn&&a.successfn({result:b,header:c})}}},finder:function(a){return{reg:/<li\s*class='clearfix section1'>(.*?)<\/a>/g,
str:a.result,find:plugfns(a.plugin).pagefind,successfn:function(b){console.log(JSON.stringify(b));b&&plugfns(a.plugin).pagedeal(b,a)}}}}},fns:{pagerule:/<li\s*class='clearfix section1'>(.*?)<\/li>/g,pagefind:"$1",pagedeal:function(a,b){b=b||{};a=a.split("{{separator}}");try{var c=getstr(/mh\/(\d+)'/,a[0]),f=getstr(/src='((?!\').*?)'/,a[0]),e=getstr(/>((?!<).*?)<\/h3><p>/,a[0]),d=getstr(/<\/h3><p>((?!<).*?)<\/p>/,a[0]),m=getstr(/<\/p><p>((?!<).*?)<\/p>/,a[0]),n=getstr(/'color_red'>((?!<).*?)<\/span>/,
a[0]),k=getstr(/class='h'>\[((?!<).*?)\]<\/span>/,a[0]),l=k?"\u3010"+d+"\u3011"+e:"",g=k?"\u3010"+m+"\u3011\u66f4\u65b0\u81f3"+k+"\u8bdd":d}catch(p){}if(b.multupdate)return b.multupdate(obj_contact(b,{pid:c,img:f,title:e,content:g})),!1;if(b.multhot)return b.multhot(obj_contact(b,{pid:c,img:f,title:e,content:g})),!1;if(b.multsearch)return b.multsearch(obj_contact(b,{pid:c,img:f,title:e,content:g})),!1;addcardlist({pid:c,title:e,name:l,img:f,content:g,stitle:n,comment:1,preview:0,extrabutton:""})}}});
