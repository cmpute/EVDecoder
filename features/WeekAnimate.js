ExView.Plugins({info:{name:"动画追番表",version:"2.3",icon:getbaiduimg("d3304434970a304eeae53a66d7c8a786c8175c12"),db:"WeekAnimate",type:"feature",fn:"ExView.modules.weekanimatepage.init();"},set:function(){ExView.modules.weekanimatepage={init:function(){try{switch(ExView.fw.showPreloader(sessionStorage.modaltitleextra+'<span style="word-wrap:break-word;">动画追番表<br>正在加载...</span>'),localStorage.ExView_WeekAnimateSource){default:case "布米米":$$.ajax({url:"http://www.bumimi.com/comic/",
success:function(a){a=getstr(/<div\s*class="tlist">((?:.|[\r\n])*?)<\/div>/,a);if(!a)return ExView.fw.hidePreloader(),ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表",function(){}),!1;console.log(a);a=a.match(/<ul>(.*?)<\/ul>/g);a=(a||[]).map(function(a){var e=/<a\s*href="(?!\").*?\/v_(\d+).html">((?!<).*?)<\/a><\/span><a\s*href="(?!\").*?\/s_(\d+).html"\s*title="((?!<).*?)">/g;return(a.match(e)||[]).map(function(a){a=a.replace(e,"$1{{separator}}$2{{separator}}$3{{separator}}$4");
a=a.split("{{separator}}");return a={cid:a[0],last:a[1],pid:a[2],title:a[3]}})});ExView.modules.weekanimatepage.load(a)},error:function(){ExView.fw.hidePreloader();ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表",function(){});ExView.modules.weekanimatepage.load()}});break;case "风车动漫":$$.ajax({url:"http://m.dm530.net/",success:function(a){a=getquery(a,".am-tab-panel");if(!a)return ExView.fw.hidePreloader(),ExView.fw.alert("网络错误！",
sessionStorage.modaltitleextra+"动画追番表",function(){}),!1;console.log(a);for(var d=[],e=0;e<a.length;e++){console.log(a[e]);for(var f=$$(a[e]).find(".am-list-item-dated"),g=[],c=0;c<f.length;c++){var b=getstr(/\/show\/(\d+)\.html/,$$(f[c]).find(".am-list-item-hd").attr("href")),k=$$(f[c]).find(".am-list-item-hd").text(),h=$$(f[c]).find(".am-list-date").text();g.push({cid:"",last:h,pid:b,title:k})}d.push(g)}ExView.modules.weekanimatepage.load(d)},error:function(){ExView.fw.hidePreloader();
ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表",function(){});ExView.modules.weekanimatepage.load()}});break;case "哔哩哔哩":$$.ajax({url:"http://bangumi.bilibili.com/jsonp/timeline_v2",success:function(a){a=JSON.parse(a);a=a.list;var d=[];a.map(function(a){d[a.weekday]=d[a.weekday]||[];d[a.weekday].push({cid:"",last:"第"+a.bgmcount+"话",pid:a.season_id,title:a.title,img:getcoverload(a.cover,{loadingimg:"img/logo.png",
errorimg:"img/logo.png"})})});ExView.modules.weekanimatepage.load(d)},error:function(){ExView.fw.hidePreloader();ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表",function(){});ExView.modules.weekanimatepage.load()}});break;case "嘀哩嘀哩":$$.ajax({url:"http://m.dilidili.wang/",success:function(a){for(var d=[],e=1;8>e;e++){var f=[],g=getquery(a,"#weekdiv"+e+" .week_item");console.log(g);for(var c=0;c<g.length;c++){var b=
$$(g[c]);f.push({cid:"",last:b.find(".week_item_right").text()||"未更新",pid:getstr(/\/anime\/([\w,\d,\_,\-]+)\//,b.find(".week_item_left>a").attr("href")),title:b.find(".week_item_left").text()})}d.push(f)}ExView.modules.weekanimatepage.load(d);console.log(JSON.stringify(d))},error:function(){ExView.fw.hidePreloader();ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表",function(){});ExView.modules.weekanimatepage.load()}})}}catch(a){ExView.fw.hidePreloader(),
ExView.fw.alert(a)}},load:function(a){localStorage.ExView_WeekAnimateSource||(localStorage.ExView_WeekAnimateSource="布米米");$$(".popover.popover-weekanimatepage-switch")&&$$("body").append('<div class="popover popover-weekanimatepage-switch popover-on-bottom"><div class="popover-inner"><div class="list-block"><ul><li><a href="javascript:void(0);" data-source="布米米" class="weekanimatepage-source list-button item-link">布米米</a></li><li><a href="javascript:void(0);" data-source="风车动漫" class="weekanimatepage-source list-button item-link">风车动漫</a></li><li><a href="javascript:void(0);" data-source="哔哩哔哩" class="weekanimatepage-source list-button item-link">哔哩哔哩</a></li><li><a href="javascript:void(0);" data-source="嘀哩嘀哩" class="weekanimatepage-source list-button item-link">嘀哩嘀哩</a></li></ul></div></div></div>');
try{for(var d="动画追番表"+getnavundertitle(localStorage.ExView_WeekAnimateSource||""),e='<div class="tabs">',f='<div class="toolbar tabbar tabbar-scrollable"><div class="toolbar-inner">',g=[{id:1,title:"周一"},{id:2,title:"周二"},{id:3,title:"周三"},{id:4,title:"周四"},{id:5,title:"周五"},{id:6,title:"周六"},{id:7,title:"周日"}],c=(new Date).getDay(),b=0,k=0;k<g.length;k++)var b=0!=c?k+1==c?1:0:7==k+1?1:0,h=g[k],f=f+('<a href="#tab-'+
h.id+'"class="tab-link '+(b?"active":"")+'" data-name="'+h.title+'">'+h.title+"</a>"),e=e+('<div id="tab-'+h.id+'"class="tab '+(b?"active":"")+'"></div>');ExView.modules.createContentPage(d,e+"</div>","weekanimatepage",'<a data-popover=".popover-weekanimatepage-switch" href="#" class="link weekanimatepage-switch pagerightbutton open-popover"><i class="icon icon-sync invert"></i></a><a href="#" class="link weekanimatepage-refresh pagerightbutton"><i class="icon icon-refresh invert"></i></a>',function(){try{ExView.fw.hidePreloader();
$$(".weekanimatepage-refresh").on("click",function(){$$("#weekanimatepage").parents(".dynamic-page").remove();ExView.modules.weekanimatepage.init()});for(var g=$$("#weekanimatepage").find(".tab"),b=0;b<g.length;b++)$$(g[b]).html('<div class="list-block" style="margin:0px"><ul></ul></div>'),a[b].forEach(function(a){$$(g[b]).find("ul").append('<li data-pid="'+a.pid+'" data-cid="'+a.cid+'" data-title="'+a.title+'" data-last="'+a.last+'"><a href="javascript:void(0);" class="item-link playdata"><div class="item-content"><div class="item-media"><img style="background-image: url(img/logo.png);background-size:contain;background-repeat:no-repeat;background-position:center;" src="'+
(a.img||"img/logo.png")+'"></div><div class="item-inner"><div class="item-title">'+a.title+'</div><div class="item-after"><div class="badge bg-'+getnowtheme()+'" style="border-radius:3px">'+a.last+"</div></div></div></div></a></li>")});$$("#weekanimatepage").find(".playdata").on("click",function(){var a=$$(this).parents("li").data("title"),g=$$(this).parents("li").data("pid");$$(this).parents("li").data("cid");ExView.fw.showPreloader(sessionStorage.modaltitleextra+'<span style="word-wrap:break-word;">'+
a+"<br>正在加载...</span>");switch(localStorage.ExView_WeekAnimateSource){default:case "布米米":$$.ajax({url:"http://www.bumimi.com/s_"+g+".html",success:function(b){var d=/<a\s*href="(?!\").*?\/v_(\d+).html"(?!<).*?>((?!<).*?)<\/a>/g;b=b.match(d);b=(b||[]).map(function(a){a=a.replace(d,"$1{{separator}}$2");a=a.split("{{separator}}");return a={pid:g,cid:a[0],title:htmlEncode(a[1])}});ExView.modules.weekanimatepage.parse(b,a,g)},error:function(){ExView.fw.hidePreloader();
ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表")}});break;case "风车动漫":$$.ajax({url:"http://m.dm530.net/v/"+g+"-0-0.html",success:function(b){b=getstr(/\/playdata\/([\d,\/]+)\.js/g,b);$$.ajax({url:"http://m.dm530.net/playdata/"+b+".js",beforeSend:function(a){a.overrideMimeType("text/html;charset=gbk")},success:function(b){b=getstr(/var\s*VideoListJson=(.*?),urlinfo=/,b);b=eval("("+b+")");console.log(b);var d=[];(b||
[]).forEach(function(a){a=a[1];a.reverse();(a||[]).forEach(function(a){a=a.split("$");var b=a[0],c=a[1];a=a[2];-1==c.indexOf(" ")&&d.push({pid:g,cid:c,title:b,source:a})})});ExView.modules.weekanimatepage.parse(d,a,g)},error:function(){ExView.fw.hidePreloader();ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表")}})},error:function(){ExView.fw.hidePreloader();ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+
"动画追番表")}});break;case "哔哩哔哩":ExView.modules.curl({url:"http://bangumi.bilibili.com/jsonp/seasoninfo/"+g+".ver",header:{"User-Agent":"ExView"},nativerequest:!0,successfn:function(b){b=getstr(/seasonListCallback\((.*?)\)/,b);b=JSON.parse(b).result.episodes;(b||[]).reverse();for(var d=[],c=0;c<b.length;c++)d.push({pid:g,cid:b[c].av_id,title:"第"+(c+1)+"集 "+b[c].index_title});console.log(d);d.reverse();ExView.modules.weekanimatepage.parse(d,a,g)},
errorfn:function(){ExView.fw.hidePreloader();ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表")},showinfo:""});break;case "嘀哩嘀哩":$$.ajax({url:"http://m.dilidili.wang/anime/"+g+"/",success:function(b){b=getquery(b,".episodeWrap li");for(var d=[],c=0;c<b.length;c++){var h=getstr(/\/watch([\d,\/]+)\//,$$(b[c]).find("a").attr("href"));h&&d.push({pid:g,cid:h,title:$$(b[c]).find("a").text()})}ExView.modules.weekanimatepage.parse(d,
a,g)},error:function(){ExView.fw.hidePreloader();ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表")}})}})}catch(m){ExView.fw.hidePreloader(),ExView.fw.alert("网络错误！",sessionStorage.modaltitleextra+"动画追番表")}},f+"</div></div>","","")}catch(l){ExView.fw.hidePreloader(),ExView.fw.alert(l)}},parse:function(a,d,e){try{var f='<div class="list-block" style="margin:0;"><ul>';a.forEach(function(a){f+=
'<li data-pid="'+a.pid+'" data-cid="'+a.cid+'" data-title="'+a.title+'" data-source="'+a.source+'"><a href="javascript:void(0);" class="item-link playdata"><div class="item-content"><div class="item-media"><img src="img/logo.png"></div><div class="item-inner"><div class="item-title">'+a.title+'</div><div class="item-after"><div class="badge bg-'+getnowtheme()+'" style="border-radius:3px">'+("undefined"!=typeof a.source?a.source:localStorage.ExView_WeekAnimateSource)+"</div></div></div></div></a></li>"});
f+="</ul></div>";ExView.modules.createContentPage(d,f,"weekanimatechapterpage",'<a href="#" class="link weekanimatepage-chapterweb">网页</a>',function(){ExView.fw.hidePreloader();$$(".weekanimatepage-chapterweb").on("click",function(){var a="",c="";switch(localStorage.ExView_WeekAnimateSource){default:case "布米米":a="http://www.bumimi.com/s_"+e+".html";c=d;break;case "风车动漫":a="http://m.dm530.net/v/"+e+"-0-0.html";c=d;break;case "哔哩哔哩":a=
"http://bangumi.bilibili.com/anime/"+e+"/";c=d;break;case "嘀哩嘀哩":a="http://m.dilidili.wang/anime/"+e+"/",c=d}openweburl(a,c)});$$("#weekanimatechapterpage").find(".playdata").on("click",function(){var a=$$(this).parents("li").data("title"),c=$$(this).parents("li").data("pid"),b=$$(this).parents("li").data("cid");ExView.fw.showPreloader(sessionStorage.modaltitleextra+'<span style="word-wrap:break-word;">'+a+"<br>正在解析...</span>");switch(localStorage.ExView_WeekAnimateSource){default:case "布米米":$$.ajax({url:"http://m.bumimi.com/v_"+
b+".html",success:function(c){c=getquery(c,"iframe");console.log(c);c=c.attr("src");$$.ajax({url:c,success:function(c){try{c=/poster="((?!\").*?)"\s*src="((?!\").*?)"/.exec(c);var e=c[1],h=c[2];ExView.fw.hidePreloader();ExView.modules.filemanagerpage.reader(h,"mp4",d+getnavundertitle(a||""),{poster:e,url:"http://m.bumimi.com/v_"+b+".html"})}catch(f){ExView.fw.hidePreloader(),openweburl("http://m.bumimi.com/v_"+b+".html",a)}},error:function(){ExView.fw.hidePreloader();openweburl("http://m.bumimi.com/v_"+
b+".html",a)}})},error:function(){ExView.fw.hidePreloader();openweburl("http://m.bumimi.com/v_"+b+".html",a)}});break;case "风车动漫":var e=$$(this).parents("li").data("source");ExView.modules.curl({url:"http://52dongm.duapp.com/play/mplayer.php?type="+e+"&vid="+b,referer:"http://m.dm530.net/",successfn:function(b,e){ExView.fw.hidePreloader();var f=atob("CnZhciBzdXBhcGkgPSAwOwp2YXIgdmlkZW9wYXJzZSA9ICcnOwp2YXIgZmx2Y2xvdWQgPSA4OwoKZnVuY3Rpb24gZWYoYSkgewogICAgdmFyIGIgPSAxNjE4MDMzOTg7CiAgICB2YXIgeSA9IGEgJSAxNiA9PSAwID8gMTYgOiBhICUgMTY7CiAgICB2YXIgYyA9ICcnOwogICAgZm9yICh2YXIgaSA9IDE7IGkgPCB5OyBpKyspIHsKICAgICAgICBjIC09IE1hdGguZmxvb3IoYiAvIGkpOwogICAgfQogICAgdmFyIGQgPSB2dignJyArIGMgKyAnJyk7CiAgICB2YXIgZSA9IGQucmVwbGFjZSgvW14wLTldL2dpLCAnJyk7CiAgICB2YXIgZiA9IGFiKGUpOwogICAgdmFyIGcgPSBmLnNwbGl0KCcnKQogICAgdmFyIGggPSBnLmxlbmd0aDsKICAgIHZhciByID0gMDsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgaDsgaisrKSB7CiAgICAgICAgciArPSBwYXJzZUludChnW2pdKTsKICAgIH0KICAgIHJldHVybiByOwp9CgpmdW5jdGlvbiBjZChoKSB7CiAgICB2YXIgciA9ICcnOwogICAgZm9yICh2YXIgaSA9IChoLnN1YnN0cigwLCAyKSA9PSAnMHgnKSA/IDIgOiAwOyBpIDwgaC5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChoLnN1YnN0cihpLCAyKSwgMTYpKQogICAgfQogICAgcmV0dXJuIHIKfQoKZnVuY3Rpb24gYWEoYSwgYikgewogICAgcmV0dXJuIHFxKGpqKGEsIGIpKQp9CgpmdW5jdGlvbiBiYih4LCBlKSB7CiAgICB4W2UgPj4gNV0gfD0gMTI4IDw8ICgoZSkgJSAzMik7CiAgICB4WygoKGUgKyA2NCkgPj4+IDkpIDw8IDQpICsgMTRdID0gZTsKICAgIHZhciBhID0gMTczMjU4NDE5MzsKICAgIHZhciBiID0gLTI3MTczMzg3OTsKICAgIHZhciBjID0gLTE3MzI1ODQxOTQ7CiAgICB2YXIgZCA9IDI3MTczMzg3ODsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkgKz0gMTYpIHsKICAgICAgICB2YXIgZiA9IGE7CiAgICAgICAgdmFyIGcgPSBiOwogICAgICAgIHZhciBoID0gYzsKICAgICAgICB2YXIgaiA9IGQ7CiAgICAgICAgYSA9IGRkKGEsIGIsIGMsIGQsIHhbaSArIDBdLCA3LCAtNjgwODc2OTM2KTsKICAgICAgICBkID0gZGQoZCwgYSwgYiwgYywgeFtpICsgMV0sIDEyLCAtMzg5NTY0NTg2KTsKICAgICAgICBjID0gZGQoYywgZCwgYSwgYiwgeFtpICsgMl0sIDE3LCA2MDYxMDU4MTkpOwogICAgICAgIGIgPSBkZChiLCBjLCBkLCBhLCB4W2kgKyAzXSwgMjIsIC0xMDQ0NTI1MzMwKTsKICAgICAgICBhID0gZGQoYSwgYiwgYywgZCwgeFtpICsgNF0sIDcsIC0xNzY0MTg4OTcpOwogICAgICAgIGQgPSBkZChkLCBhLCBiLCBjLCB4W2kgKyA1XSwgMTIsIDEyMDAwODA0MjYpOwogICAgICAgIGMgPSBkZChjLCBkLCBhLCBiLCB4W2kgKyA2XSwgMTcsIC0xNDczMjMxMzQxKTsKICAgICAgICBiID0gZGQoYiwgYywgZCwgYSwgeFtpICsgN10sIDIyLCAtNDU3MDU5ODMpOwogICAgICAgIGEgPSBkZChhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNywgMTc3MDAzNTQxNik7CiAgICAgICAgZCA9IGRkKGQsIGEsIGIsIGMsIHhbaSArIDldLCAxMiwgLTE5NTg0MTQ0MTcpOwogICAgICAgIGMgPSBkZChjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE3LCAtNDIwNjMpOwogICAgICAgIGIgPSBkZChiLCBjLCBkLCBhLCB4W2kgKyAxMV0sIDIyLCAtMTk5MDQwNDE2Mik7CiAgICAgICAgYSA9IGRkKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNywgMTgwNDYwMzY4Mik7CiAgICAgICAgZCA9IGRkKGQsIGEsIGIsIGMsIHhbaSArIDEzXSwgMTIsIC00MDM0MTEwMSk7CiAgICAgICAgYyA9IGRkKGMsIGQsIGEsIGIsIHhbaSArIDE0XSwgMTcsIC0xNTAyMDAyMjkwKTsKICAgICAgICBiID0gZGQoYiwgYywgZCwgYSwgeFtpICsgMTVdLCAyMiwgMTIzNjUzNTMyOSk7CiAgICAgICAgYSA9IGVlKGEsIGIsIGMsIGQsIHhbaSArIDFdLCA1LCAtMTY1Nzk2NTEwKTsKICAgICAgICBkID0gZWUoZCwgYSwgYiwgYywgeFtpICsgNl0sIDksIC0xMDY5NTAxNjMyKTsKICAgICAgICBjID0gZWUoYywgZCwgYSwgYiwgeFtpICsgMTFdLCAxNCwgNjQzNzE3NzEzKTsKICAgICAgICBiID0gZWUoYiwgYywgZCwgYSwgeFtpICsgMF0sIDIwLCAtMzczODk3MzAyKTsKICAgICAgICBhID0gZWUoYSwgYiwgYywgZCwgeFtpICsgNV0sIDUsIC03MDE1NTg2OTEpOwogICAgICAgIGQgPSBlZShkLCBhLCBiLCBjLCB4W2kgKyAxMF0sIDksIDM4MDE2MDgzKTsKICAgICAgICBjID0gZWUoYywgZCwgYSwgYiwgeFtpICsgMTVdLCAxNCwgLTY2MDQ3ODMzNSk7CiAgICAgICAgYiA9IGVlKGIsIGMsIGQsIGEsIHhbaSArIDRdLCAyMCwgLTQwNTUzNzg0OCk7CiAgICAgICAgYSA9IGVlKGEsIGIsIGMsIGQsIHhbaSArIDldLCA1LCA1Njg0NDY0MzgpOwogICAgICAgIGQgPSBlZShkLCBhLCBiLCBjLCB4W2kgKyAxNF0sIDksIC0xMDE5ODAzNjkwKTsKICAgICAgICBjID0gZWUoYywgZCwgYSwgYiwgeFtpICsgM10sIDE0LCAtMTg3MzYzOTYxKTsKICAgICAgICBiID0gZWUoYiwgYywgZCwgYSwgeFtpICsgOF0sIDIwLCAxMTYzNTMxNTAxKTsKICAgICAgICBhID0gZWUoYSwgYiwgYywgZCwgeFtpICsgMTNdLCA1LCAtMTQ0NDY4MTQ2Nyk7CiAgICAgICAgZCA9IGVlKGQsIGEsIGIsIGMsIHhbaSArIDJdLCA5LCAtNTE0MDM3ODQpOwogICAgICAgIGMgPSBlZShjLCBkLCBhLCBiLCB4W2kgKyA3XSwgMTQsIDE3MzUzMjg0NzMpOwogICAgICAgIGIgPSBlZShiLCBjLCBkLCBhLCB4W2kgKyAxMl0sIDIwLCAtMTkyNjYwNzczNCk7CiAgICAgICAgYSA9IGZmKGEsIGIsIGMsIGQsIHhbaSArIDVdLCA0LCAtMzc4NTU4KTsKICAgICAgICBkID0gZmYoZCwgYSwgYiwgYywgeFtpICsgOF0sIDExLCAtMjAyMjU3NDQ2Myk7CiAgICAgICAgYyA9IGZmKGMsIGQsIGEsIGIsIHhbaSArIDExXSwgMTYsIDE4MzkwMzA1NjIpOwogICAgICAgIGIgPSBmZihiLCBjLCBkLCBhLCB4W2kgKyAxNF0sIDIzLCAtMzUzMDk1NTYpOwogICAgICAgIGEgPSBmZihhLCBiLCBjLCBkLCB4W2kgKyAxXSwgNCwgLTE1MzA5OTIwNjApOwogICAgICAgIGQgPSBmZihkLCBhLCBiLCBjLCB4W2kgKyA0XSwgMTEsIDEyNzI4OTMzNTMpOwogICAgICAgIGMgPSBmZihjLCBkLCBhLCBiLCB4W2kgKyA3XSwgMTYsIC0xNTU0OTc2MzIpOwogICAgICAgIGIgPSBmZihiLCBjLCBkLCBhLCB4W2kgKyAxMF0sIDIzLCAtMTA5NDczMDY0MCk7CiAgICAgICAgYSA9IGZmKGEsIGIsIGMsIGQsIHhbaSArIDEzXSwgNCwgNjgxMjc5MTc0KTsKICAgICAgICBkID0gZmYoZCwgYSwgYiwgYywgeFtpICsgMF0sIDExLCAtMzU4NTM3MjIyKTsKICAgICAgICBjID0gZmYoYywgZCwgYSwgYiwgeFtpICsgM10sIDE2LCAtNzIyNTIxOTc5KTsKICAgICAgICBiID0gZmYoYiwgYywgZCwgYSwgeFtpICsgNl0sIDIzLCA3NjAyOTE4OSk7CiAgICAgICAgYSA9IGZmKGEsIGIsIGMsIGQsIHhbaSArIDldLCA0LCAtNjQwMzY0NDg3KTsKICAgICAgICBkID0gZmYoZCwgYSwgYiwgYywgeFtpICsgMTJdLCAxMSwgLTQyMTgxNTgzNSk7CiAgICAgICAgYyA9IGZmKGMsIGQsIGEsIGIsIHhbaSArIDE1XSwgMTYsIDUzMDc0MjUyMCk7CiAgICAgICAgYiA9IGZmKGIsIGMsIGQsIGEsIHhbaSArIDJdLCAyMywgLTk5NTMzODY1MSk7CiAgICAgICAgYSA9IGhoKGEsIGIsIGMsIGQsIHhbaSArIDBdLCA2LCAtMTk4NjMwODQ0KTsKICAgICAgICBkID0gaGgoZCwgYSwgYiwgYywgeFtpICsgN10sIDEwLCAxMTI2ODkxNDE1KTsKICAgICAgICBjID0gaGgoYywgZCwgYSwgYiwgeFtpICsgMTRdLCAxNSwgLTE0MTYzNTQ5MDUpOwogICAgICAgIGIgPSBoaChiLCBjLCBkLCBhLCB4W2kgKyA1XSwgMjEsIC01NzQzNDA1NSk7CiAgICAgICAgYSA9IGhoKGEsIGIsIGMsIGQsIHhbaSArIDEyXSwgNiwgMTcwMDQ4NTU3MSk7CiAgICAgICAgZCA9IGhoKGQsIGEsIGIsIGMsIHhbaSArIDNdLCAxMCwgLTE4OTQ5ODY2MDYpOwogICAgICAgIGMgPSBoaChjLCBkLCBhLCBiLCB4W2kgKyAxMF0sIDE1LCAtMTA1MTUyMyk7CiAgICAgICAgYiA9IGhoKGIsIGMsIGQsIGEsIHhbaSArIDFdLCAyMSwgLTIwNTQ5MjI3OTkpOwogICAgICAgIGEgPSBoaChhLCBiLCBjLCBkLCB4W2kgKyA4XSwgNiwgMTg3MzMxMzM1OSk7CiAgICAgICAgZCA9IGhoKGQsIGEsIGIsIGMsIHhbaSArIDE1XSwgMTAsIC0zMDYxMTc0NCk7CiAgICAgICAgYyA9IGhoKGMsIGQsIGEsIGIsIHhbaSArIDZdLCAxNSwgLTE1NjAxOTgzODApOwogICAgICAgIGIgPSBoaChiLCBjLCBkLCBhLCB4W2kgKyAxM10sIDIxLCAxMzA5MTUxNjQ5KTsKICAgICAgICBhID0gaGgoYSwgYiwgYywgZCwgeFtpICsgNF0sIDYsIC0xNDU1MjMwNzApOwogICAgICAgIGQgPSBoaChkLCBhLCBiLCBjLCB4W2kgKyAxMV0sIDEwLCAtMTEyMDIxMDM3OSk7CiAgICAgICAgYyA9IGhoKGMsIGQsIGEsIGIsIHhbaSArIDJdLCAxNSwgNzE4Nzg3MjU5KTsKICAgICAgICBiID0gaGgoYiwgYywgZCwgYSwgeFtpICsgOV0sIDIxLCAtMzQzNDg1NTUxKTsKICAgICAgICBhID0ga2soYSwgZik7CiAgICAgICAgYiA9IGtrKGIsIGcpOwogICAgICAgIGMgPSBrayhjLCBoKTsKICAgICAgICBkID0ga2soZCwgaikKICAgIH0KICAgIHJldHVybiBBcnJheShhLCBiLCBjLCBkKQp9CgpmdW5jdGlvbiBnaChhLCBiKSB7CiAgICB2YXIgcCwgciwgdCwgczsKICAgIHAgPSBbImJlYXd1dHkhNiIsICJfc3UucGFpX1YiLCAiTFkyTkM1UiIsICJ2cDknOGEiLCAiQSE1STFFLFM5LmMiLCAiSi5ZLitULlYwOSIsICJAUS5FLmg2OSIsICIuVFRILjc4Il07CiAgICByID0gYiArIHAuc2xpY2UoMSwgNilbM10gKyAyMy4udG9TdHJpbmcoKSArIGE7CiAgICByID0gci5yZXBsYWNlKC8oXGQrKS9naSwgJ2ZsdmNsb3VkJyk7CiAgICB0ID0gYi5zcGxpdCgnJyk7CiAgICBzID0gclt0WzddICogNV0gKyByW3RbOV0gKiAzXSArIHJbdFs4XSAqIDFdOwogICAgcmV0dXJuIHMKfQoKZnVuY3Rpb24gZGQoYSwgYiwgYywgZCwgeCwgcywgdCkgewogICAgcmV0dXJuIGxsKChiICYgYykgfCAoKH5iKSAmIGQpLCBhLCBiLCB4LCBzLCB0KQp9CgpmdW5jdGlvbiBlZShhLCBiLCBjLCBkLCB4LCBzLCB0KSB7CiAgICByZXR1cm4gbGwoKGIgJiBkKSB8IChjICYgKH5kKSksIGEsIGIsIHgsIHMsIHQpCn0KCmZ1bmN0aW9uIGZmKGEsIGIsIGMsIGQsIHgsIHMsIHQpIHsKICAgIHJldHVybiBsbChiIF4gYyBeIGQsIGEsIGIsIHgsIHMsIHQpCn0KCmZ1bmN0aW9uIGdnKGEsIGIpIHsKICAgIHJldHVybiBzcyhqaihhLCBiKSkKfQoKZnVuY3Rpb24gaGgoYSwgYiwgYywgZCwgeCwgcywgdCkgewogICAgcmV0dXJuIGxsKGMgXiAoYiB8ICh+ZCkpLCBhLCBiLCB4LCBzLCB0KQp9CgpmdW5jdGlvbiB4eChhLCBiKSB7CiAgICB2YXIgYyA9IGE7CiAgICBpZiAoYiA8IGEpIHsKICAgICAgICBhID0gYjsKICAgICAgICBiID0gYwogICAgfQogICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChiIC0gYSArIDEpICsgYSkKfQoKZnVuY3Rpb24gd3coYSwgYiwgYywgZCkgewogICAgcmV0dXJuIGIuc3Vic3RyaW5nKDYsIDEwKSArIHZ2KGEgKyAnYTUyOGJhMzYyZGQ5NmExMTc3YTA2MTc1OTE5YmY1YmYnKS5zdWJzdHJpbmcoJzgnLCAnMTYnKSArIHl5KGMpLnN1YnN0cmluZygnOCcsICcxNicpICsgZAp9OwoKZnVuY3Rpb24gamooYSwgYikgewogICAgdmFyIGMgPSBpaShhKTsKICAgIGlmIChjLmxlbmd0aCA+IDE2KSBjID0gYmIoYywgYS5sZW5ndGggKiBmbHZjbG91ZCk7CiAgICB2YXIgZCA9IEFycmF5KDE2KSwKICAgICAgICBvcGFkID0gQXJyYXkoMTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7CiAgICAgICAgZFtpXSA9IGNbaV0gXiA5MDk1MjI0ODY7CiAgICAgICAgb3BhZFtpXSA9IGNbaV0gXiAxNTQ5NTU2ODI4CiAgICB9CiAgICB2YXIgZSA9IGJiKGQuY29uY2F0KGlpKGIpKSwgNTEyICsgYi5sZW5ndGggKiBmbHZjbG91ZCk7CiAgICByZXR1cm4gYmIob3BhZC5jb25jYXQoZSksIDUxMiArIDEyOCkKfQoKZnVuY3Rpb24gaWkoYSkgewogICAgdmFyIGIgPSBBcnJheSgpOwogICAgdmFyIGMgPSAoMSA8PCBmbHZjbG91ZCkgLSAxOwogICAgdmFyIGEgPSBhICsgJ2ZsdmNsb3VkJzsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGggKiBmbHZjbG91ZDsgaSArPSBmbHZjbG91ZCkgYltpID4+IDVdIHw9IChhLmNoYXJDb2RlQXQoaSAvIGZsdmNsb3VkKSAmIGMpIDw8IChpICUgMzIpOwogICAgcmV0dXJuIGIKfQoKZnVuY3Rpb24ga2soeCwgeSkgewogICAgdmFyIGEgPSAoeCAmIDY1NTM1KSArICh5ICYgNjU1MzUpOwogICAgdmFyIGIgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAoYSA+PiAxNik7CiAgICByZXR1cm4gKGIgPDwgMTYpIHwgKGEgJiA2NTUzNSkKfQoKZnVuY3Rpb24gdnYocykgewogICAgcmV0dXJuIHFxKGJiKGlpKHMpLCAocy5sZW5ndGggKyBmbHZjbG91ZCkgKiBmbHZjbG91ZCkpCn0KCmZ1bmN0aW9uIGxsKHEsIGEsIGIsIHgsIHMsIHQpIHsKICAgIHJldHVybiBrayhtbShrayhrayhhLCBxKSwga2soeCwgdCkpLCBzKSwgYikKfQoKZnVuY3Rpb24gbW0oYSwgYikgewogICAgcmV0dXJuIChhIDw8IGIpIHwgKGEgPj4+ICgzMiAtIGIpKQp9CgpmdW5jdGlvbiB5eShhKSB7CiAgICByZXR1cm4gdnYoYS5qb2luKCcnKSArICcwN2ZlY2FkMjhlNGZiMWU2MGNkMjNiMmRiN2ZjNGRkOCcpCn07CgpmdW5jdGlvbiBvbyhhKSB7CiAgICB2YXIgYiA9ICcnOwogICAgdmFyIGMgPSAoMSA8PCBmbHZjbG91ZCkgLSAxOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aCAqIDMyOyBpICs9IGZsdmNsb3VkKSBiICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGFbaSA+PiA1XSA+Pj4gKGkgJSAzMikpICYgYyk7CiAgICByZXR1cm4gYgp9CgpmdW5jdGlvbiBwcChzKSB7CiAgICByZXR1cm4gc3MoYmIoaWkocyksIHMubGVuZ3RoICogZmx2Y2xvdWQpKQp9CgpmdW5jdGlvbiBxcShhKSB7CiAgICB2YXIgYiA9IHN1cGFwaSA/ICcwMTIzNDU2Nzg5QUJDREVGJyA6ICcwMTIzNDU2Nzg5YWJjZGVmJzsKICAgIHZhciBjID0gJyc7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoICogNDsgaSsrKSB7CiAgICAgICAgYyArPSBiLmNoYXJBdCgoYVtpID4+IDJdID4+ICgoaSAlIDQpICogOCArIDQpKSAmIDE1KSArIGIuY2hhckF0KChhW2kgPj4gMl0gPj4gKChpICUgNCkgKiA4KSkgJiAxNSkKICAgIH0KICAgIHJldHVybiBjCn0KCmZ1bmN0aW9uIHJyKHMpIHsKICAgIHJldHVybiBvbyhiYihpaShzKSwgcy5sZW5ndGggKiBmbHZjbG91ZCkpCn0KCmZ1bmN0aW9uIHNzKGEpIHsKICAgIHZhciBiID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwogICAgdmFyIGMgPSAnJzsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGggKiA0OyBpICs9IDMpIHsKICAgICAgICB2YXIgZCA9ICgoKGFbaSA+PiAyXSA+PiA4ICogKGkgJSA0KSkgJiAyNTUpIDw8IDE2KSB8ICgoKGFbaSArIDEgPj4gMl0gPj4gOCAqICgoaSArIDEpICUgNCkpICYgMjU1KSA8PCA4KSB8ICgoYVtpICsgMiA+PiAyXSA+PiA4ICogKChpICsgMikgJSA0KSkgJiAyNTUpOwogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7CiAgICAgICAgICAgIGlmIChpICogOCArIGogKiA2ID4gYS5sZW5ndGggKiAzMikgYyArPSB2aWRlb3BhcnNlOwogICAgICAgICAgICBlbHNlIGMgKz0gYi5jaGFyQXQoKGQgPj4gNiAqICgzIC0gaikpICYgNjMpCiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIGMKfQoKZnVuY3Rpb24gdHQoYSwgYikgewogICAgcmV0dXJuIG9vKGpqKGEsIGIpKQp9CgpmdW5jdGlvbiB1dShlLCB0KSB7CiAgICB2YXIgaSA9IFtdLAogICAgICAgIG4gPSAwLAogICAgICAgIGEsCiAgICAgICAgcyA9ICcnOwogICAgZm9yICh2YXIgciA9IDA7IHIgPCAyNTY7IHIrKykgaVtyXSA9IHI7CiAgICBmb3IgKHIgPSAwOyByIDwgMjU2OyByKyspIHsKICAgICAgICBuID0gKG4gKyBpW3JdICsgdC5jaGFyQ29kZUF0KHIgJSB0Lmxlbmd0aCkpICUgMjU2OwogICAgICAgIGEgPSBpW3JdOwogICAgICAgIGlbcl0gPSBpW25dOwogICAgICAgIGlbbl0gPSBhCiAgICB9CiAgICByID0gMDsKICAgIG4gPSAwOwogICAgZm9yICh2YXIgbyA9IDA7IG8gPCBlLmxlbmd0aDsgbysrKSB7CiAgICAgICAgciA9IChyICsgMSkgJSAyNTY7CiAgICAgICAgbiA9IChuICsgaVtyXSkgJSAyNTY7CiAgICAgICAgYSA9IGlbcl07CiAgICAgICAgaVtyXSA9IGlbbl07CiAgICAgICAgaVtuXSA9IGE7CiAgICAgICAgcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGVBdChvKSBeIGlbKGlbcl0gKyBpW25dKSAlIDI1Nl0pCiAgICB9CiAgICByZXR1cm4gdnYocykKfQoKZnVuY3Rpb24gYWIocykgewogICAgLy92YXIgciA9ICIweCI7CiAgICB2YXIgciA9ICcnOwogICAgdmFyIGhleGVzID0gbmV3IEFycmF5KCcwJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJyk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHsKICAgICAgICByICs9IGhleGVzW3MuY2hhckNvZGVBdChpKSA+PiA0XSArIGhleGVzW3MuY2hhckNvZGVBdChpKSAmIDE1XQogICAgfQogICAgcmV0dXJuIHIKfQoKZnVuY3Rpb24genooYSkgewogICAgdmFyIG4gPSB4eCgzLCA5KTsKICAgIHZhciB5ID0gYS5sZW5ndGggJSBuOwogICAgdmFyIHogPSBNYXRoLmZsb29yKGEubGVuZ3RoIC8gbik7CiAgICB2YXIgYiA9IFtdOwogICAgdmFyIHN0cjEgPSAnJzsKICAgIGZvciAodmFyIHggPSAwOyB4IDw9IHo7IHgrKykgewogICAgICAgIHN0cjEgPSBhLnN1YnN0cigwLCBuKTsKICAgICAgICBhID0gYS5yZXBsYWNlKHN0cjEsICcnKTsKICAgICAgICBpZiAoc3RyMSkgewogICAgICAgICAgICBiW3hdID0gc3RyMTsKICAgICAgICB9OwogICAgfQogICAgdmFyIHMgPSAnJzsKICAgIHZhciBrID0gMDsKICAgIHkgPT0gMCA/IHogPSB6IC0gMSA6IHo7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBuOyBpKyspIHsKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8PSB6OyBqKyspIHsKICAgICAgICAgICAgaWYgKGJbal1ba10pIHsKICAgICAgICAgICAgICAgIHMgKz0gYltqXVtrXQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoaiA9PSB6KSB7CiAgICAgICAgICAgICAgICBrKysKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBuICsgcwp9");
try{var m=getstr(/type="text\/javascript">((?:.|[\r\n])*?)var isWap/g,b),k=Function(f+";\n"+m+";\nreturn video;")();ExView.modules.filemanagerpage.reader(k,"mp4",d+" - "+a,{poster:"img/logo.png",url:"http://m.dm530.net/v/"+c+"-0-0.html"})}catch(q){openweburl("http://m.dm530.net/v/"+c+"-0-0.html",a)}},errorfn:function(b,d){ExView.fw.hidePreloader();openweburl("http://m.dm530.net/v/"+c+"-0-0.html",a)},showinfo:"正在解析地址..."});break;case "哔哩哔哩":$$.ajax({url:"http://www.bilibili.com/mobile/video/av"+
b+".html",success:function(c){c=getstr(/var\s*token\s*=\s*'([\d,\w]+)'/,c);$$.ajax({url:"http://api.bilibili.com/playurl?aid="+b+"&page=1&platform=html5&quality=1&vtype=mp4&token="+c,success:function(c){try{c=JSON.parse(c);var e=c.img,f=c.durl[0].url;ExView.fw.hidePreloader();ExView.modules.filemanagerpage.reader(f,"mp4",d+" - "+a,{poster:e,url:"http://www.bilibili.com/mobile/video/av"+b+".html"})}catch(h){ExView.fw.hidePreloader(),openweburl("http://www.bilibili.com/mobile/video/av"+b+".html",a)}},
error:function(){ExView.fw.hidePreloader();openweburl("http://www.bilibili.com/mobile/video/av"+b+".html",a)}})},error:function(){ExView.fw.hidePreloader();openweburl("http://www.bilibili.com/mobile/video/av"+b+".html",a)}});break;case "嘀哩嘀哩":ExView.modules.curl({url:"http://m.dilidili.wang/watch"+b+"/",successfn:function(c,e){var f=getquery(c,"#vedio>iframe").attr("src");ExView.modules.curl({url:f,referer:"http://m.dilidili.wang/",successfn:function(c,e){var f=getstr(/var vid="((?!\").*?)"/,
c),h=getstr(/var hd2="(\d+)"/,c),k=getstr(/var typ="(\w+)"/,c),l=getstr(/var sign="([\w,\d]+)"/,c),n=getstr(/var ulk="((?!\").*?)"/,c),p=getstr(/&tmsign=([\w,\d]+)/,c);"_"==f.substr(2,1)&&"yun"!=k&&(f=f.split("_")[1]);ExView.modules.curl({url:"https://newplayer.jfrft.com/parse.php?h5url=null&type="+k+"&vid="+f+"&hd="+h+"&sign="+l+"&tmsign="+p+"&ajax=1&userlink="+n,referer:"http://m.dilidili.wang/",successfn:function(c,e){try{ExView.fw.hidePreloader(),ExView.modules.filemanagerpage.reader(c,"mp4",
d+getnavundertitle(a||""),{poster:"img/logo.png",url:"http://m.dilidili.wang/watch"+b+"/"})}catch(f){ExView.fw.hidePreloader()}},errorfn:function(){ExView.fw.hidePreloader();openweburl("http://m.dilidili.wang/watch"+b+"/",a)}})},errorfn:function(){ExView.fw.hidePreloader();openweburl("http://m.dilidili.wang/watch"+b+"/",a)}})},errorfn:function(){ExView.fw.hidePreloader();openweburl("http://m.dilidili.wang/watch"+b+"/",a)}})}})},null,null,"")}catch(g){ExView.fw.hidePreloader(),ExView.fw.alert("网络错误！",
sessionStorage.modaltitleextra+"动画追番表")}}}}});
