ExView.Plugins({info:{name:"同步播放",version:"2.3",icon:getbaiduimg("6a897ce736d12f2ec04351b648c2d56284356803"),db:"MultVideo",type:"feature",fn:"ExView.modules.multvideopage.init();"},set:function(){ExView.modules.multvideopage={init:function(){ExView.modules.createContentPage("同步播放",'<table border="1" style="background:black;position:absolute;border-collapse:collapse;width:100vw;height:100vh;border:1px solid #000000"><tbody><tr><td style="overflow: hidden;width:50vw;height:50vh;max-height:50vh"><video id="video1" class="playvideo" controls="controls"></video></td><td style="overflow: hidden;width:50vw;height:50vh;max-height:50vh" class=""><video id="video2" class="playvideo" controls="controls"></video></td></tr><tr class="playvideoswitch"><td style="overflow: hidden;width:50vw;height:50vh;max-height:50vh"><video id="video3" class="playvideo" controls="controls"></video></td><td style="overflow: hidden;width:50vw;height:50vh;max-height:50vh"><video id="video4" class="playvideo" controls="controls"></video></td></tr></tbody></table>',
"multvideopage",'<a href="javascript:void(0);" class="link playtwovideo icon-only">2格</a><a href="javascript:void(0);" class="link playfourvideo icon-only">4格</a>',function(){try{StatusBar.hide()}catch(a){}try{screen.lockOrientation("landscape")}catch(a){}$$(".page[data-page='multvideopage']").find(".dynamic-page-close").once("click",function(){if(!mySession.gobalsettings.alwayhidestatusbar)try{StatusBar.show()}catch(a){}if(!mySession.gobalsettings.forcelandscapemode)try{screen.unlockOrientation()}catch(a){}});
$$(".playtwovideo").on("click",function(){for(var a=0;a<$$(".playvideo").length;a++)$$(".playvideo")[a].pause();$$(".playvideoswitch").css("display","none")});$$(".playfourvideo").on("click",function(){for(var a=0;a<$$(".playvideo").length;a++)$$(".playvideo")[a].pause();$$(".playvideoswitch").css("display","")});$$("#multvideopage").on("scroll",function(){0==$$(this).offset().top?$$(".navbar").removeClass("navbar-hidden"):$$("#multvideopage").parent().find(".navbar").addClass("navbar-hidden")});
var c=function(a){$$(".actions-modal").remove();$$(".modal-overlay").removeClass("modal-overlay-visible");for(var b=0;b<$$(".playvideo").length;b++)$$(".playvideo")[b].pause();ExView.modules.filemanagerpage.init("选择视频文件","/","mp4|webm",function(b,c){if(c){console.log($$(a).parents("td").find("video"));$$(a).parents("td").find("video").attr("src",c);var d=$$(a).parents("td").find("video")[0];$$(d).src=c;for(d=0;d<$$(".playvideo").length;d++)$$(".playvideo")[d].play();
console.log(b);return!0}})};$$(".rotate").on("click",function(){var a=$$($$(this).parents("td").find("video")[0]),b="none"==a.css("transform")?0:eval("get"+a.css("transform"));a.css({transform:"rotate("+(b+90)%360+"deg)"})});$$(".openpath").on("click",function(){c(this)});$$(".fullscreen").on("click",function(){for(var a=0;a<$$(".playvideo").length;a++)$$(".playvideo")[a].pause();$$(this).parents("td").find("video")[0].webkitRequestFullScreen()});$$(".playvideo").parents("td").on("touchstart touchmove",
function(){mySession.touchtime=getTimeNow()});$$(".playvideo").parents("td").on("touchend",function(){var a=$$(this).find("video")[0];1E3<(new Date).getTime()-mySession.touchtime&&ExView.fw.actions([{text:"打开",color:"red",onClick:function(){c(a)}},{text:"旋转90度",color:"red",onClick:function(){var b=$$(a),c="none"==b.css("transform")?0:eval("get"+b.css("transform"));b.css({transform:"rotate("+(c+90)%360+"deg)"});0==(c+90)%360||180==(c+90)%360?(b.css("width","100%"),b.css("height",
"")):b.css("height",b.css("width"))}},{text:"全屏",color:"red",onClick:function(){for(var b=0;b<$$(".playvideo").length;b++)$$(".playvideo")[b].pause();a.webkitRequestFullScreen()}}]);mySession.touchtime=getTimeNow();return!1});$$(".playvideo").on("click",function(){var a=$$(this)[0];if(!a.src)return c($$(this)),!1;a.paused?a.play():a.pause()})},"","",'list-block hide-bars-on-scroll"style="margin-top:0px;position:relative!important;background:black;"')}}}});
